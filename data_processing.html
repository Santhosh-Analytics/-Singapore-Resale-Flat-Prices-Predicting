<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Quarto Basics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="data_processing_files/libs/clipboard/clipboard.min.js"></script>
<script src="data_processing_files/libs/quarto-html/quarto.js"></script>
<script src="data_processing_files/libs/quarto-html/popper.min.js"></script>
<script src="data_processing_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="data_processing_files/libs/quarto-html/anchor.min.js"></script>
<link href="data_processing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data_processing_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="data_processing_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="data_processing_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="data_processing_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Quarto Basics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


# <b>
<div style="padding:25px;background-color:#9B2335;color:white;border-radius:4px;font-size:100%;text-align: center">
Singapore Resale Flat Prices Prediction<br>
</div>
<section id="importing-required-libraries" class="level2">
<h2 class="anchored" data-anchor-id="importing-required-libraries"><span style="color:Khaki;">Importing required libraries</span></h2>
<div id="cell-2" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> pearsonr,kstest, norm, boxcox</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats <span class="im">as</span> stats</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wordcloud <span class="im">import</span> WordCloud, STOPWORDS</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> Counter </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder, OneHotEncoder</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>sns.set_theme(context<span class="op">=</span><span class="st">'notebook'</span>, style<span class="op">=</span><span class="st">'white'</span>, palette<span class="op">=</span><span class="st">'dark'</span>, font<span class="op">=</span><span class="st">'sans-serif'</span>, font_scale<span class="op">=</span><span class="dv">1</span>, color_codes<span class="op">=</span><span class="va">True</span>, rc<span class="op">=</span><span class="va">None</span>)  </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="reading-and-understanding-the-dataset" class="level2">
<h2 class="anchored" data-anchor-id="reading-and-understanding-the-dataset"><span style="color:Khaki;">Reading and Understanding the Dataset</span></h2>
<div id="cell-5" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df_90_99<span class="op">=</span>pd.read_csv(<span class="st">'dataset/ResaleFlatPricesBasedonApprovalDate19901999.csv'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df_00_12<span class="op">=</span>pd.read_csv(<span class="st">'dataset/ResaleFlatPricesBasedonApprovalDate2000Feb2012.csv'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df_12_14<span class="op">=</span>pd.read_csv(<span class="st">'dataset/ResaleFlatPricesBasedonRegistrationDateFromMar2012toDec2014.csv'</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>df_15_16<span class="op">=</span>pd.read_csv(<span class="st">'dataset/ResaleFlatPricesBasedonRegistrationDateFromJan2015toDec2016.csv'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>df_17_<span class="op">=</span>pd.read_csv(<span class="st">'dataset/ResaleflatpricesbasedonregistrationdatefromJan2017onwards.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-6" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df<span class="op">=</span>pd.concat([df_90_99,df_00_12,df_12_14,df_15_16,df_17_], axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-7" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df.sample(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">town</th>
<th data-quarto-table-cell-role="th">flat_type</th>
<th data-quarto-table-cell-role="th">block</th>
<th data-quarto-table-cell-role="th">street_name</th>
<th data-quarto-table-cell-role="th">storey_range</th>
<th data-quarto-table-cell-role="th">floor_area_sqm</th>
<th data-quarto-table-cell-role="th">flat_model</th>
<th data-quarto-table-cell-role="th">lease_commence_date</th>
<th data-quarto-table-cell-role="th">resale_price</th>
<th data-quarto-table-cell-role="th">remaining_lease</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">65184</td>
<td>2020-01</td>
<td>KALLANG/WHAMPOA</td>
<td>4 ROOM</td>
<td>119</td>
<td>MCNAIR RD</td>
<td>01 TO 03</td>
<td>83.0</td>
<td>Simplified</td>
<td>1987</td>
<td>435000.0</td>
<td>66 years 08 months</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">100513</td>
<td>1995-09</td>
<td>BUKIT BATOK</td>
<td>EXECUTIVE</td>
<td>535</td>
<td>BT BATOK ST 52</td>
<td>04 TO 06</td>
<td>146.0</td>
<td>MAISONETTE</td>
<td>1987</td>
<td>439000.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">155748</td>
<td>1997-04</td>
<td>MARINE PARADE</td>
<td>4 ROOM</td>
<td>76</td>
<td>MARINE DR</td>
<td>04 TO 06</td>
<td>82.0</td>
<td>IMPROVED</td>
<td>1976</td>
<td>355000.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">70651</td>
<td>1994-06</td>
<td>BEDOK</td>
<td>5 ROOM</td>
<td>710</td>
<td>BEDOK RESERVOIR RD</td>
<td>01 TO 03</td>
<td>125.0</td>
<td>IMPROVED</td>
<td>1980</td>
<td>283000.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">232085</td>
<td>2007-04</td>
<td>JURONG EAST</td>
<td>4 ROOM</td>
<td>271</td>
<td>TOH GUAN RD</td>
<td>13 TO 15</td>
<td>101.0</td>
<td>Model A</td>
<td>1999</td>
<td>296000.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">117509</td>
<td>2003-04</td>
<td>TAMPINES</td>
<td>5 ROOM</td>
<td>361</td>
<td>TAMPINES ST 34</td>
<td>07 TO 09</td>
<td>128.0</td>
<td>Improved</td>
<td>1996</td>
<td>328000.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">51227</td>
<td>1993-09</td>
<td>YISHUN</td>
<td>4 ROOM</td>
<td>241</td>
<td>YISHUN RING RD</td>
<td>01 TO 03</td>
<td>96.0</td>
<td>NEW GENERATION</td>
<td>1986</td>
<td>122000.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">157939</td>
<td>1997-05</td>
<td>CLEMENTI</td>
<td>3 ROOM</td>
<td>427</td>
<td>CLEMENTI AVE 3</td>
<td>07 TO 09</td>
<td>67.0</td>
<td>NEW GENERATION</td>
<td>1978</td>
<td>209000.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">173301</td>
<td>1997-10</td>
<td>YISHUN</td>
<td>4 ROOM</td>
<td>218</td>
<td>YISHUN ST 21</td>
<td>07 TO 09</td>
<td>93.0</td>
<td>NEW GENERATION</td>
<td>1985</td>
<td>270000.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">241232</td>
<td>1999-03</td>
<td>CHOA CHU KANG</td>
<td>5 ROOM</td>
<td>705</td>
<td>CHOA CHU KANG ST 53</td>
<td>10 TO 12</td>
<td>137.0</td>
<td>MODEL A</td>
<td>1995</td>
<td>361000.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-8" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.shape)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df.sample(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(927465, 11)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">town</th>
<th data-quarto-table-cell-role="th">flat_type</th>
<th data-quarto-table-cell-role="th">block</th>
<th data-quarto-table-cell-role="th">street_name</th>
<th data-quarto-table-cell-role="th">storey_range</th>
<th data-quarto-table-cell-role="th">floor_area_sqm</th>
<th data-quarto-table-cell-role="th">flat_model</th>
<th data-quarto-table-cell-role="th">lease_commence_date</th>
<th data-quarto-table-cell-role="th">resale_price</th>
<th data-quarto-table-cell-role="th">remaining_lease</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">208739</td>
<td>1998-08</td>
<td>YISHUN</td>
<td>4 ROOM</td>
<td>751</td>
<td>YISHUN ST 72</td>
<td>07 TO 09</td>
<td>91.0</td>
<td>NEW GENERATION</td>
<td>1984</td>
<td>235000.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32228</td>
<td>1992-07</td>
<td>BISHAN</td>
<td>5 ROOM</td>
<td>117</td>
<td>BISHAN ST 12</td>
<td>04 TO 06</td>
<td>121.0</td>
<td>IMPROVED</td>
<td>1987</td>
<td>150000.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">263101</td>
<td>2008-06</td>
<td>BUKIT PANJANG</td>
<td>5 ROOM</td>
<td>539</td>
<td>BT PANJANG RING RD</td>
<td>01 TO 03</td>
<td>120.0</td>
<td>Improved</td>
<td>1999</td>
<td>292000.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">64492</td>
<td>2001-10</td>
<td>HOUGANG</td>
<td>4 ROOM</td>
<td>658</td>
<td>HOUGANG AVE 8</td>
<td>01 TO 03</td>
<td>107.0</td>
<td>Model A</td>
<td>1987</td>
<td>245000.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.dtypes,<span class="st">'</span><span class="ch">\n\n</span><span class="st">'</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>month                   object
town                    object
flat_type               object
block                   object
street_name             object
storey_range            object
floor_area_sqm         float64
flat_model              object
lease_commence_date      int64
resale_price           float64
remaining_lease         object
dtype: object 


&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 927465 entries, 0 to 181261
Data columns (total 11 columns):
 #   Column               Non-Null Count   Dtype  
---  ------               --------------   -----  
 0   month                927465 non-null  object 
 1   town                 927465 non-null  object 
 2   flat_type            927465 non-null  object 
 3   block                927465 non-null  object 
 4   street_name          927465 non-null  object 
 5   storey_range         927465 non-null  object 
 6   floor_area_sqm       927465 non-null  float64
 7   flat_model           927465 non-null  object 
 8   lease_commence_date  927465 non-null  int64  
 9   resale_price         927465 non-null  float64
 10  remaining_lease      218415 non-null  object 
dtypes: float64(2), int64(1), object(8)
memory usage: 84.9+ MB</code></pre>
</div>
</div>
<section id="feature-details" class="level3">
<h3 class="anchored" data-anchor-id="feature-details"><span style="color:Khaki;">Feature Details:</span></h3>
<ol type="1">
<li>Month - Year and Month of sale of the property.</li>
<li>Town - Property Location</li>
<li>Flat Type - Property Classification</li>
<li>Block - Building contains multiple units/flats</li>
<li>Street Name - Property Location</li>
<li>Storey Range - Estimated range of floors the unit sold was located on</li>
<li>Floor Area SQM - Total Estimated space measured in square meters</li>
<li>Flat Model - Classification of units by generation of which the flat was made, ranging from New Generation, DBSS, Improved, Apartment</li>
<li>Lease Commence Date - Starting point of a lease agreement, marking the beginning of the lease term during which the tenant has the right to use and occupy the leased property</li>
<li>Resale Price - Cost of the flat sold</li>
<li>Remaining Lease - remaining lease periond</li>
</ol>
</section>
<section id="initial-observations" class="level3">
<h3 class="anchored" data-anchor-id="initial-observations"><span style="color:Khaki;">Initial Observations:</span></h3>
<ol type="1">
<li><p>The month column seems to represent a date in ‘YYYY-MM’ format.</p></li>
<li><p>The remaining_lease column has mixed data types (both numeric and string values like “45 years 05 months”) and NaN values.</p></li>
<li><p>Most columns contain numeric or categorical data.</p></li>
<li><p>Other columns may also have missing values (not evident from the sample but should be checked).</p></li>
<li><p>We could potentially create a new features like:</p>
<ul>
<li><span style="color: DodgerBlue;font-family:calibri;"><strong>Flat’s age</strong></span> - by calculating the difference between the current year (2024) and the lease commence year.</li>
<li><span style="color: DodgerBlue;font-family:calibri;"><strong>No of Floors</strong></span> - by subtracting the Storey range values (Eg data point ‘5 to 8’ then 8-5 = 3).</li>
<li><span style="color: DodgerBlue;font-family:calibri;"><strong>Price per SQM</strong></span> - by dividing the resale price by floor area sqm</li>
</ul></li>
<li><p>Need to verify the clasess in the categorical features to ensure consistency.</p></li>
<li><p>Need to convert data type for efficient storage.</p></li>
</ol>
</section>
</section>
<section id="checking-null-values" class="level1">
<h1><span style="color:Khaki;">Checking Null Values</span></h1>
<div id="cell-15" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>month                       0
town                        0
flat_type                   0
block                       0
street_name                 0
storey_range                0
floor_area_sqm              0
flat_model                  0
lease_commence_date         0
resale_price                0
remaining_lease        709050
dtype: int64</code></pre>
</div>
</div>
<div id="cell-16" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df.isna().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>month                       0
town                        0
flat_type                   0
block                       0
street_name                 0
storey_range                0
floor_area_sqm              0
flat_model                  0
lease_commence_date         0
resale_price                0
remaining_lease        709050
dtype: int64</code></pre>
</div>
</div>
<p><span style="color: Chartreuse;font-size: 110%"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">We can drop ‘Remaining lease’ since it contains many null values. Instead, we can create ‘Property age,’ which may provide similar insights.</span></span></p>
<div id="cell-18" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df<span class="op">=</span>df.drop(columns<span class="op">=</span><span class="st">'remaining_lease'</span>,axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>Index(['month', 'town', 'flat_type', 'block', 'street_name', 'storey_range',
       'floor_area_sqm', 'flat_model', 'lease_commence_date', 'resale_price'],
      dtype='object')</code></pre>
</div>
</div>
<section id="updating-data-types" class="level2">
<h2 class="anchored" data-anchor-id="updating-data-types"><span style="color:Khaki;">Updating Data types</span></h2>
<div id="cell-20" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'town'</span>] <span class="op">=</span> df[<span class="st">'town'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'flat_type'</span>] <span class="op">=</span> df[<span class="st">'flat_type'</span>].astype(<span class="st">'category'</span>) </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'block'</span>] <span class="op">=</span> df[<span class="st">'block'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'street_name'</span>] <span class="op">=</span> df[<span class="st">'street_name'</span>].astype(<span class="st">'category'</span>) </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'storey_range'</span>] <span class="op">=</span> df[<span class="st">'storey_range'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'flat_model'</span>] <span class="op">=</span> df[<span class="st">'flat_model'</span>].astype(<span class="st">'category'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-21" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> df.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">- Min </span><span class="sc">{</span>df[i]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">}</span><span class="ss">---, Max </span><span class="sc">{</span>df[i]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss"> '</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>floor_area_sqm- Min 28.0---, Max 307.0 
lease_commence_date- Min 1966---, Max 2020 
resale_price- Min 5000.0---, Max 1588000.0 </code></pre>
</div>
</div>
<div id="cell-22" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'floor_area_sqm'</span>] <span class="op">=</span> df[<span class="st">'floor_area_sqm'</span>].astype(<span class="st">'float32'</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'lease_commence_date'</span>] <span class="op">=</span> df[<span class="st">'lease_commence_date'</span>].astype(<span class="st">'int32'</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'month'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'month'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'%Y-%m'</span>, errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'month'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'month'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'%Y-%m'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-23" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> df.select_dtypes(exclude<span class="op">=</span><span class="st">'number'</span>):</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">- </span><span class="sc">{</span>df[i]<span class="sc">.</span>value_counts()<span class="sc">.</span>count()<span class="sc">}</span><span class="ch">\n</span><span class="ss"> '</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>month- 414
 
town- 27
 
flat_type- 8
 
block- 2711
 
street_name- 584
 
storey_range- 25
 
flat_model- 34
 </code></pre>
</div>
</div>
<div id="cell-24" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 927465 entries, 0 to 181261
Data columns (total 10 columns):
 #   Column               Non-Null Count   Dtype         
---  ------               --------------   -----         
 0   month                927465 non-null  datetime64[ns]
 1   town                 927465 non-null  category      
 2   flat_type            927465 non-null  category      
 3   block                927465 non-null  category      
 4   street_name          927465 non-null  category      
 5   storey_range         927465 non-null  category      
 6   floor_area_sqm       927465 non-null  float32       
 7   flat_model           927465 non-null  category      
 8   lease_commence_date  927465 non-null  int32         
 9   resale_price         927465 non-null  float64       
dtypes: category(6), datetime64[ns](1), float32(1), float64(1), int32(1)
memory usage: 35.5 MB</code></pre>
</div>
</div>
<div id="cell-25" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df.describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
<th data-quarto-table-cell-role="th">std</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">month</td>
<td>927465</td>
<td>2006-08-20 18:43:29.075706368</td>
<td>1990-01-01 00:00:00</td>
<td>1999-01-01 00:00:00</td>
<td>2005-04-01 00:00:00</td>
<td>2014-03-01 00:00:00</td>
<td>2024-06-01 00:00:00</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">floor_area_sqm</td>
<td>927465.0</td>
<td>95.691246</td>
<td>28.0</td>
<td>73.0</td>
<td>93.0</td>
<td>113.0</td>
<td>307.0</td>
<td>25.824986</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">lease_commence_date</td>
<td>927465.0</td>
<td>1988.278012</td>
<td>1966.0</td>
<td>1981.0</td>
<td>1986.0</td>
<td>1996.0</td>
<td>2020.0</td>
<td>10.664813</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">resale_price</td>
<td>927465.0</td>
<td>320848.058806</td>
<td>5000.0</td>
<td>193000.0</td>
<td>297500.0</td>
<td>418000.0</td>
<td>1588000.0</td>
<td>170522.857301</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">The Data Frame size reduced by 58% </span></span><br> <span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">We have data from the year 1990 to 2024.</span></span><br> <span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">Large gaps between the 75th percentile and maximum values in floor area and resale price suggest outliers. However, factors like Year, storey range, flat type, and model may also affect price. Careful outlier analysis is required.</span></span><br> <span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">The minimum value in the resale price of 5,000 also suggests possible data entry errors or highly undervalued sales.</span></span><br></p>
<section id="checking-categorical-feature-classess" class="level3">
<h3 class="anchored" data-anchor-id="checking-categorical-feature-classess">Checking Categorical feature Classess <span style="color:Khaki;"></span></h3>
<div id="cell-28" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> df.select_dtypes(include<span class="op">=</span><span class="st">'category'</span>):</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'-----'</span><span class="op">*</span><span class="dv">10</span>,<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>,df[i].value_counts().reset_index().sort_values(by<span class="op">=</span>i,ascending<span class="op">=</span><span class="va">True</span>),<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>,<span class="st">'-----'</span><span class="op">*</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>-------------------------------------------------- 
                town  count
5        ANG MO KIO  52090
3             BEDOK  66677
20           BISHAN  21271
7       BUKIT BATOK  44429
9       BUKIT MERAH  34383
16    BUKIT PANJANG  27708
25      BUKIT TIMAH   2519
24     CENTRAL AREA   7150
8     CHOA CHU KANG  38348
15         CLEMENTI  28040
14          GEYLANG  28179
6           HOUGANG  50772
18      JURONG EAST  24796
2       JURONG WEST  66715
17  KALLANG/WHAMPOA  27199
26     LIM CHU KANG     64
23    MARINE PARADE   8041
10        PASIR RIS  33237
21          PUNGGOL  20665
13       QUEENSTOWN  28784
22        SEMBAWANG  13869
11         SENGKANG  32488
19        SERANGOON  22835
0          TAMPINES  80005
12        TOA PAYOH  31541
4         WOODLANDS  65563
1            YISHUN  70097 
 --------------------------------------------------
-------------------------------------------------- 
           flat_type   count
5            1 ROOM    1304
4            2 ROOM   11841
1            3 ROOM  296064
0            4 ROOM  352489
2            5 ROOM  195520
3         EXECUTIVE   69704
6  MULTI GENERATION     279
7  MULTI-GENERATION     264 
 --------------------------------------------------
-------------------------------------------------- 
      block  count
1        1   4045
37      10   2342
442    100    763
3      101   3407
1228  101A    105
...    ...    ...
2038   99A     50
2183   99B     43
2028   99C     50
2480    9A     28
2554    9B     23

[2711 rows x 2 columns] 
 --------------------------------------------------
-------------------------------------------------- 
         street_name  count
141    ADMIRALTY DR   2370
225  ADMIRALTY LINK   1498
521      AH HOOD RD    185
565    ALEXANDRA RD     59
583  ALJUNIED AVE 2      1
..              ...    ...
384   YUNG KUANG RD    530
468     YUNG LOH RD    299
387    YUNG PING RD    515
429   YUNG SHENG RD    408
447         ZION RD    354

[584 rows x 2 columns] 
 --------------------------------------------------
-------------------------------------------------- 
    storey_range   count
2      01 TO 03  186466
9      01 TO 05    2700
0      04 TO 06  232709
10     06 TO 10    2474
1      07 TO 09  210246
3      10 TO 12  178899
12     11 TO 15    1259
4      13 TO 15   62059
5      16 TO 18   24174
16     16 TO 20     265
6      19 TO 21   11441
18     21 TO 25      92
7      22 TO 24    7443
8      25 TO 27    3445
21     26 TO 30      39
11     28 TO 30    1647
13     31 TO 33     631
24     31 TO 35       2
14     34 TO 36     577
23     36 TO 40       7
15     37 TO 39     509
17     40 TO 42     246
19     43 TO 45      65
20     46 TO 48      53
22     49 TO 51      17 
 --------------------------------------------------
-------------------------------------------------- 
                 flat_model   count
32                  2-ROOM      21
26                  2-room     117
31                    3Gen      32
15               APARTMENT    9901
17           Adjoined flat    1250
8                Apartment   25603
16                    DBSS    3308
4                 IMPROVED   73589
30     IMPROVED-MAISONETTE      44
1                 Improved  168318
29     Improved-Maisonette      82
13              MAISONETTE   12215
5                  MODEL A   70381
19      MODEL A-MAISONETTE     982
22        MULTI GENERATION     279
11              Maisonette   17466
0                  Model A  194884
18      Model A-Maisonette    1096
14                Model A2   10142
23        Multi Generation     264
3           NEW GENERATION   78898
2           New Generation  110125
33       PREMIUM APARTMENT       6
6        Premium Apartment   46806
27  Premium Apartment Loft     108
28      Premium Maisonette      86
10              SIMPLIFIED   23258
12                STANDARD   17375
7               Simplified   34302
9                 Standard   25179
24                 TERRACE     247
20                 Terrace     447
21                 Type S1     437
25                 Type S2     217 
 --------------------------------------------------</code></pre>
</div>
</div>
<p><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">In the Flat Type and Flat Model variable we see case inconsistency classes (Same class in upper case and lower case). It creates duplicate classes. Better we address this in all categorical column. </span></span><br></p>
###
<p style="color: Khaki;">
Cleaning Case and Text inconsistency
</p>
<div id="cell-31" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> df.select_dtypes(include<span class="op">=</span><span class="st">'category'</span>):</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'block'</span> <span class="kw">not</span> <span class="kw">in</span> i:</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col].<span class="bu">str</span>.strip().<span class="bu">str</span>.title()</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>        df[col].describe()</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(df[col].describe(),<span class="st">'</span><span class="ch">\n\n</span><span class="st">'</span>,df[col].value_counts().reset_index().sort_values(by<span class="op">=</span>col,ascending<span class="op">=</span><span class="va">True</span>),<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>,<span class="st">'-----'</span><span class="op">*</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>count       927465
unique          27
top       Tampines
freq         80005
Name: town, dtype: object 

                town  count
5        Ang Mo Kio  52090
3             Bedok  66677
20           Bishan  21271
7       Bukit Batok  44429
9       Bukit Merah  34383
16    Bukit Panjang  27708
25      Bukit Timah   2519
24     Central Area   7150
8     Choa Chu Kang  38348
15         Clementi  28040
14          Geylang  28179
6           Hougang  50772
18      Jurong East  24796
2       Jurong West  66715
17  Kallang/Whampoa  27199
26     Lim Chu Kang     64
23    Marine Parade   8041
10        Pasir Ris  33237
21          Punggol  20665
13       Queenstown  28784
22        Sembawang  13869
11         Sengkang  32488
19        Serangoon  22835
0          Tampines  80005
12        Toa Payoh  31541
4         Woodlands  65563
1            Yishun  70097 
 --------------------------------------------------
count     927465
unique         8
top       4 Room
freq      352489
Name: flat_type, dtype: object 

           flat_type   count
5            1 Room    1304
4            2 Room   11841
1            3 Room  296064
0            4 Room  352489
2            5 Room  195520
3         Executive   69704
6  Multi Generation     279
7  Multi-Generation     264 
 --------------------------------------------------
count     927465
unique      2711
top            2
freq        4590
Name: block, dtype: object 

      block  count
1        1   4045
37      10   2342
442    100    763
3      101   3407
1225  101A    105
...    ...    ...
2029   99A     50
2183   99B     43
2033   99C     50
2467    9A     28
2546    9B     23

[2711 rows x 2 columns] 
 --------------------------------------------------
count             927465
unique               584
top       Yishun Ring Rd
freq               17606
Name: street_name, dtype: object 

         street_name  count
141    Admiralty Dr   2370
225  Admiralty Link   1498
521      Ah Hood Rd    185
565    Alexandra Rd     59
583  Aljunied Ave 2      1
..              ...    ...
384   Yung Kuang Rd    530
468     Yung Loh Rd    299
387    Yung Ping Rd    515
429   Yung Sheng Rd    408
447         Zion Rd    354

[584 rows x 2 columns] 
 --------------------------------------------------
count       927465
unique          25
top       04 To 06
freq        232709
Name: storey_range, dtype: object 

    storey_range   count
2      01 To 03  186466
9      01 To 05    2700
0      04 To 06  232709
10     06 To 10    2474
1      07 To 09  210246
3      10 To 12  178899
12     11 To 15    1259
4      13 To 15   62059
5      16 To 18   24174
16     16 To 20     265
6      19 To 21   11441
18     21 To 25      92
7      22 To 24    7443
8      25 To 27    3445
21     26 To 30      39
11     28 To 30    1647
13     31 To 33     631
24     31 To 35       2
14     34 To 36     577
23     36 To 40       7
15     37 To 39     509
17     40 To 42     246
19     43 To 45      65
20     46 To 48      53
22     49 To 51      17 
 --------------------------------------------------
count      927465
unique         21
top       Model A
freq       265265
Name: flat_model, dtype: object 

                 flat_model   count
16                  2-Room     138
20                    3Gen      32
11           Adjoined Flat    1250
6                Apartment   35504
9                     Dbss    3308
1                 Improved  241907
17     Improved-Maisonette     126
7               Maisonette   29681
0                  Model A  265265
10      Model A-Maisonette    2078
8                 Model A2   10142
13        Multi Generation     543
2           New Generation  189023
4        Premium Apartment   46812
18  Premium Apartment Loft     108
19      Premium Maisonette      86
3               Simplified   57560
5                 Standard   42554
12                 Terrace     694
14                 Type S1     437
15                 Type S2     217 
 --------------------------------------------------</code></pre>
</div>
</div>
<p><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">Standardizing the text case solved most of the problem but we can see text inconsistency in the Flat Type variable, let’s clear it.</span></span><br></p>
<div id="cell-33" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'flat_type'</span>].value_counts().reset_index().sort_values(by<span class="op">=</span><span class="st">'count'</span>,ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">flat_type</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>4 Room</td>
<td>352489</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>3 Room</td>
<td>296064</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>5 Room</td>
<td>195520</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Executive</td>
<td>69704</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2 Room</td>
<td>11841</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>1 Room</td>
<td>1304</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Multi Generation</td>
<td>279</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Multi-Generation</td>
<td>264</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-34" class="cell" data-scrolled="true" data-execution_count="20">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'flat_type'</span>] <span class="op">=</span> df[<span class="st">'flat_type'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.strip().replace(<span class="st">'-'</span>, <span class="st">' '</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-35" class="cell" data-execution_count="21">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'flat_type'</span>].value_counts().reset_index().sort_values(by<span class="op">=</span><span class="st">'count'</span>,ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">flat_type</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>4 Room</td>
<td>352489</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>3 Room</td>
<td>296064</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>5 Room</td>
<td>195520</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Executive</td>
<td>69704</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2 Room</td>
<td>11841</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>1 Room</td>
<td>1304</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Multi Generation</td>
<td>543</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p style="color: Khaki;">
##
</p><p style="color: Khaki">
</p><p>Feature Engineering</p>
###
<p style="color: Khaki">
Variable Simplification/Agrregation/Transformation:
</p>
<div id="cell-39" class="cell" data-scrolled="true" data-execution_count="24">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'floors'</span>]<span class="op">=</span> df[<span class="st">'storey_range'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: (<span class="bu">int</span>(x.split(<span class="st">' To '</span>)[<span class="dv">1</span>]) <span class="op">-</span> <span class="bu">int</span>(x.split(<span class="st">' To '</span>)[<span class="dv">0</span>]))<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'floor_no'</span>]<span class="op">=</span> df[<span class="st">'storey_range'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x.split(<span class="st">' To '</span>)[<span class="op">-</span><span class="dv">1</span>])).astype(<span class="st">'int8'</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>df<span class="op">=</span>df.drop(columns<span class="op">=</span><span class="st">'storey_range'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">Changed the storey_range from a string range to a numeric span for easy accessible. </span></span><br><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">Keeping floor level is important as it may also influence the sale price. </span></span><br></p>
<div id="cell-41" class="cell" data-execution_count="25">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'year'</span>] <span class="op">=</span> df[<span class="st">'month'</span>].dt.year</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'month'</span>] <span class="op">=</span> df[<span class="st">'month'</span>].dt.month</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">Separated Year and Month variable from month variable. </span></span><br></p>
###
<p style="color: Khaki">
</p><p>Creating New Features</p>
<div id="cell-44" class="cell" data-execution_count="26">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 927465 entries, 0 to 181261
Data columns (total 12 columns):
 #   Column               Non-Null Count   Dtype  
---  ------               --------------   -----  
 0   month                927465 non-null  int32  
 1   town                 927465 non-null  object 
 2   flat_type            927465 non-null  object 
 3   block                927465 non-null  object 
 4   street_name          927465 non-null  object 
 5   floor_area_sqm       927465 non-null  float32
 6   flat_model           927465 non-null  object 
 7   lease_commence_date  927465 non-null  int32  
 8   resale_price         927465 non-null  float64
 9   floors               927465 non-null  int64  
 10  floor_no             927465 non-null  int8   
 11  year                 927465 non-null  int32  
dtypes: float32(1), float64(1), int32(3), int64(1), int8(1), object(5)
memory usage: 71.6+ MB</code></pre>
</div>
</div>
<div id="cell-45" class="cell" data-execution_count="27">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'full_address'</span>] <span class="op">=</span> df[<span class="st">'block'</span>].astype(<span class="bu">str</span>) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> df[<span class="st">'street_name'</span>].astype(<span class="bu">str</span>) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> df[<span class="st">'town'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-46" class="cell" data-execution_count="28">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'block'</span>,<span class="st">'street_name'</span>,<span class="st">'town'</span>,<span class="st">'full_address'</span>]].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">block</th>
<th data-quarto-table-cell-role="th">street_name</th>
<th data-quarto-table-cell-role="th">town</th>
<th data-quarto-table-cell-role="th">full_address</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>927465</td>
<td>927465</td>
<td>927465</td>
<td>927465</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">unique</td>
<td>2711</td>
<td>584</td>
<td>27</td>
<td>9836</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">top</td>
<td>2</td>
<td>Yishun Ring Rd</td>
<td>Tampines</td>
<td>211 Boon Lay Pl Jurong West</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">freq</td>
<td>4590</td>
<td>17606</td>
<td>80005</td>
<td>822</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-47" class="cell" data-execution_count="29">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">'block'</span>,<span class="st">'street_name'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">Combining Block, Street, and Town into a single “full address” captures the precise influence of location on price better than treating these features separately.Treating each component of the address separately (block, street, town) can increase the complexity of the model</span></span><br></p>
<div id="cell-49" class="cell" data-execution_count="30">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'floor_area_sqm'</span> <span class="kw">in</span> df.columns:</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  df[<span class="st">'price_per_sqm'</span>] <span class="op">=</span> np.where(df[<span class="st">'floor_area_sqm'</span>] <span class="op">&gt;</span> <span class="dv">0</span>, df[<span class="st">'resale_price'</span>] <span class="op">/</span> df[<span class="st">'floor_area_sqm'</span>], np.nan)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  df[<span class="st">'price_per_sqm'</span>] <span class="op">=</span> np.nan</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%">Calculating price per SQM may help provide insights about price influence, Identifying Outliers, and analyze price trends It helps remove the influence of overall property size and allows you to focus on the price difference based purely on location. </span></span><br></p>
<div id="cell-51" class="cell" data-execution_count="31">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'remaining_lease_year'</span>] <span class="op">=</span> df[<span class="st">'lease_commence_date'</span>] <span class="op">+</span> <span class="dv">99</span> <span class="op">-</span> df[<span class="st">'year'</span>].astype(<span class="st">'int'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><span style="color: Chartreuse;"> ☸ &nbsp; <span style="color: DodgerBlue;font-size: 130%"> It may provide the approximate age of the property which is also a price influencer.</span></span><br></p>
<div id="cell-53" class="cell" data-execution_count="32">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'full_address'</span>,<span class="st">'year'</span>,<span class="st">'month'</span>,<span class="st">'remaining_lease_year'</span>,<span class="st">'floors'</span>,<span class="st">'lease_commence_date'</span>,<span class="st">'flat_type'</span>,<span class="st">'flat_model'</span>,<span class="st">'town'</span>]] <span class="op">=</span> df[[<span class="st">'full_address'</span>,<span class="st">'year'</span>,<span class="st">'month'</span>,<span class="st">'remaining_lease_year'</span>,<span class="st">'floors'</span>,<span class="st">'lease_commence_date'</span>,<span class="st">'flat_type'</span>,<span class="st">'flat_model'</span>,<span class="st">'town'</span>]].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.astype(<span class="st">'category'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
##
<p style="color: Khaki;">
Analyzing Data Frame after data cleaning
</p>
<div id="cell-55" class="cell" data-execution_count="33">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.info())</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>df.sample(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 927465 entries, 0 to 181261
Data columns (total 13 columns):
 #   Column                Non-Null Count   Dtype   
---  ------                --------------   -----   
 0   month                 927465 non-null  category
 1   town                  927465 non-null  category
 2   flat_type             927465 non-null  category
 3   floor_area_sqm        927465 non-null  float32 
 4   flat_model            927465 non-null  category
 5   lease_commence_date   927465 non-null  category
 6   resale_price          927465 non-null  float64 
 7   floors                927465 non-null  category
 8   floor_no              927465 non-null  int8    
 9   year                  927465 non-null  category
 10  full_address          927465 non-null  category
 11  price_per_sqm         927465 non-null  float64 
 12  remaining_lease_year  927465 non-null  category
dtypes: category(9), float32(1), float64(2), int8(1)
memory usage: 34.8 MB
None</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="33">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">town</th>
<th data-quarto-table-cell-role="th">flat_type</th>
<th data-quarto-table-cell-role="th">floor_area_sqm</th>
<th data-quarto-table-cell-role="th">flat_model</th>
<th data-quarto-table-cell-role="th">lease_commence_date</th>
<th data-quarto-table-cell-role="th">resale_price</th>
<th data-quarto-table-cell-role="th">floors</th>
<th data-quarto-table-cell-role="th">floor_no</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">full_address</th>
<th data-quarto-table-cell-role="th">price_per_sqm</th>
<th data-quarto-table-cell-role="th">remaining_lease_year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">152084</td>
<td>4</td>
<td>Yishun</td>
<td>3 Room</td>
<td>68.0</td>
<td>Model A</td>
<td>2018</td>
<td>445000.0</td>
<td>3</td>
<td>12</td>
<td>2023</td>
<td>675D Yishun Ave 4 Yishun</td>
<td>6544.117647</td>
<td>94</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">212287</td>
<td>7</td>
<td>Kallang/Whampoa</td>
<td>5 Room</td>
<td>122.0</td>
<td>Improved</td>
<td>1999</td>
<td>380000.0</td>
<td>3</td>
<td>15</td>
<td>2006</td>
<td>13 Upp Boon Keng Rd Kallang/Whampoa</td>
<td>3114.754098</td>
<td>92</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">129252</td>
<td>9</td>
<td>Yishun</td>
<td>4 Room</td>
<td>105.0</td>
<td>Model A</td>
<td>1985</td>
<td>207000.0</td>
<td>3</td>
<td>9</td>
<td>2003</td>
<td>132 Yishun St 11 Yishun</td>
<td>1971.428571</td>
<td>81</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11346</td>
<td>5</td>
<td>Jurong West</td>
<td>4 Room</td>
<td>106.0</td>
<td>Model A</td>
<td>1996</td>
<td>232500.0</td>
<td>3</td>
<td>3</td>
<td>2000</td>
<td>864 Jurong West St 81 Jurong West</td>
<td>2193.396226</td>
<td>95</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">62395</td>
<td>11</td>
<td>Yishun</td>
<td>5 Room</td>
<td>112.0</td>
<td>Improved</td>
<td>2015</td>
<td>501000.0</td>
<td>3</td>
<td>9</td>
<td>2019</td>
<td>426A Yishun Ave 11 Yishun</td>
<td>4473.214286</td>
<td>95</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-56" class="cell" data-execution_count="34">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.isnull().<span class="bu">sum</span>(),<span class="st">'</span><span class="ch">\n\n</span><span class="st">'</span>,df.isna().<span class="bu">sum</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>month                   0
town                    0
flat_type               0
floor_area_sqm          0
flat_model              0
lease_commence_date     0
resale_price            0
floors                  0
floor_no                0
year                    0
full_address            0
price_per_sqm           0
remaining_lease_year    0
dtype: int64 

 month                   0
town                    0
flat_type               0
floor_area_sqm          0
flat_model              0
lease_commence_date     0
resale_price            0
floors                  0
floor_no                0
year                    0
full_address            0
price_per_sqm           0
remaining_lease_year    0
dtype: int64</code></pre>
</div>
</div>
<div id="cell-57" class="cell" data-execution_count="35">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>Index(['month', 'town', 'flat_type', 'floor_area_sqm', 'flat_model',
       'lease_commence_date', 'resale_price', 'floors', 'floor_no', 'year',
       'full_address', 'price_per_sqm', 'remaining_lease_year'],
      dtype='object')</code></pre>
</div>
</div>
<div id="cell-58" class="cell" data-execution_count="36">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>num<span class="op">=</span>df.select_dtypes(include<span class="op">=</span>[<span class="st">'number'</span>]).columns</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> num:</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss"> -  </span><span class="sc">{</span>(df[col] <span class="op">&lt;=</span> <span class="dv">0</span>)<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>floor_area_sqm -  0
resale_price -  0
floor_no -  0
price_per_sqm -  0</code></pre>
</div>
</div>
##
<p style="color: Khaki;">
</p><p>Exporting Data Frame</p>
<div id="cell-60" class="cell" data-execution_count="37">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">'df1.csv'</span>,index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-61" class="cell" data-execution_count="38">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>df.to_feather(<span class="st">'df1.feather'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-62" class="cell" data-execution_count="39">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>continuous <span class="op">=</span> [<span class="st">'floor_area_sqm'</span>, <span class="st">'resale_price'</span>,<span class="st">'price_per_sqm'</span>]</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># discrete = ['lease_commence_date', 'year', 'month_number']</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># nominal = ['month', 'town', 'flat_type', 'block', 'street_name', 'flat_model', 'full_address']</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ordinal = ['storey_range', 'remaining_lease']</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>categorical <span class="op">=</span> [<span class="st">'year'</span>,<span class="st">'month_number'</span> ,<span class="st">'town'</span>, <span class="st">'flat_type'</span>,</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>       <span class="st">'flat_model'</span>,<span class="st">'storey_range'</span>,<span class="st">'lease_commence_date'</span>,<span class="st">'remaining_lease_year'</span>,<span class="st">'floor_area_category'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="exploratory-data-analysis.-before-handling-skewness-and-outliers" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis.-before-handling-skewness-and-outliers">Exploratory Data Analysis. Before Handling Skewness and Outliers</h2>
<div id="cell-64" class="cell" data-execution_count="40">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> univar_num(df, col):</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">8</span>))</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.dropna(subset<span class="op">=</span>[col])</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    mean<span class="op">=</span>df[col].mean()</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    median<span class="op">=</span>df[col].median()</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">=</span>df[col].mode()[<span class="dv">0</span>]</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    sns.histplot(data<span class="op">=</span>df, x<span class="op">=</span>col, kde<span class="op">=</span><span class="va">True</span>, bins<span class="op">=</span><span class="dv">50</span>,color<span class="op">=</span><span class="st">'maroon'</span>,fill<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Histogram for </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>    plt.axvline(mean, color<span class="op">=</span><span class="st">'maroon'</span>, label<span class="op">=</span><span class="st">'Mean'</span>)</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    plt.axvline(median, color<span class="op">=</span><span class="st">'black'</span>, label<span class="op">=</span><span class="st">'Median'</span>)</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    plt.axvline(mode, color<span class="op">=</span><span class="st">'darkgreen'</span>, label<span class="op">=</span><span class="st">'Mode'</span>)</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(data<span class="op">=</span>df, x<span class="op">=</span>col, color<span class="op">=</span><span class="st">'lightgrey'</span>,legend<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Box Plot for </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    plt.axvline(mean, color<span class="op">=</span><span class="st">'maroon'</span>, label<span class="op">=</span><span class="st">'Mean'</span>)</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>    plt.axvline(median, color<span class="op">=</span><span class="st">'black'</span>, label<span class="op">=</span><span class="st">'Median'</span>)</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>    plt.axvline(mode, color<span class="op">=</span><span class="st">'darkgreen'</span>, label<span class="op">=</span><span class="st">'Mode'</span>)</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>    stats.probplot(df[col], dist<span class="op">=</span><span class="st">"norm"</span>, plot<span class="op">=</span>plt)</span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>    plt.gca().get_lines()[<span class="dv">1</span>].set_color(<span class="st">'maroon'</span>)</span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>    plt.gca().get_lines()[<span class="dv">0</span>].set_color(<span class="st">'darkgreen'</span>)</span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'QQ Plot for </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="numerical-features-distribution" class="level3">
<h3 class="anchored" data-anchor-id="numerical-features-distribution">Numerical features Distribution</h3>
<div id="cell-66" class="cell" data-execution_count="41">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>df1.describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="41">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">floor_area_sqm</td>
<td>927465.0</td>
<td>95.691246</td>
<td>25.824986</td>
<td>28.000000</td>
<td>73.00000</td>
<td>93.000000</td>
<td>113.0</td>
<td>3.070000e+02</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">lease_commence_date</td>
<td>927465.0</td>
<td>1988.278012</td>
<td>10.664813</td>
<td>1966.000000</td>
<td>1981.00000</td>
<td>1986.000000</td>
<td>1996.0</td>
<td>2.020000e+03</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">resale_price</td>
<td>927465.0</td>
<td>320848.058806</td>
<td>170522.857301</td>
<td>5000.000000</td>
<td>193000.00000</td>
<td>297500.000000</td>
<td>418000.0</td>
<td>1.588000e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">price_per_sqm</td>
<td>927465.0</td>
<td>3318.137732</td>
<td>1532.133749</td>
<td>161.290323</td>
<td>2292.26087</td>
<td>2956.521739</td>
<td>4200.0</td>
<td>1.559140e+04</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">year</td>
<td>927465.0</td>
<td>2006.174394</td>
<td>9.324771</td>
<td>1990.000000</td>
<td>1999.00000</td>
<td>2005.000000</td>
<td>2014.0</td>
<td>2.024000e+03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">month_number</td>
<td>927465.0</td>
<td>6.550482</td>
<td>3.413028</td>
<td>1.000000</td>
<td>4.00000</td>
<td>7.000000</td>
<td>10.0</td>
<td>1.200000e+01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">remaining_lease_year</td>
<td>927465.0</td>
<td>81.103618</td>
<td>10.717863</td>
<td>41.000000</td>
<td>74.00000</td>
<td>83.000000</td>
<td>90.0</td>
<td>1.010000e+02</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-67" class="cell" data-execution_count="42">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> kurtosis_color(kurt_val):</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">-</span><span class="dv">1</span> <span class="op">&lt;=</span> kurt_val <span class="op">&lt;=</span> <span class="dv">1</span>:</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>        kurt_color <span class="op">=</span> color_good  <span class="co"># Dark Green for near-zero kurtosis (good)</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">1</span> <span class="op">&lt;</span> kurt_val <span class="op">&lt;=</span> <span class="dv">3</span> <span class="kw">or</span> <span class="op">-</span><span class="dv">3</span> <span class="op">&lt;=</span> kurt_val <span class="op">&lt;</span> <span class="op">-</span><span class="dv">1</span>:</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>        kurt_color <span class="op">=</span> color_okay  <span class="co"># Yellow for moderate kurtosis</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:  <span class="co"># kurt_val &gt; 3 or kurt_val &lt; -3</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>        kurt_color <span class="op">=</span> color_bad  <span class="co"># Maroon for extreme kurtosis</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> kurt_color</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> skewness_color(skew_val):</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">-</span><span class="fl">0.5</span> <span class="op">&lt;=</span> skew_val <span class="op">&lt;=</span> <span class="fl">0.5</span>:</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_good  <span class="co"># Dark Green for near-zero skew</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">0</span> <span class="op">&lt;</span> skew_val <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="kw">or</span> <span class="op">-</span><span class="fl">0.5</span> <span class="op">&lt;</span> skew_val <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_okay  <span class="co"># Light Green for slightly positive or slightly negative skew</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:  <span class="co"># skew_val &gt; 0.5 or skew_val &lt; -0.5</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_bad  <span class="co"># Maroon for significant skew</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> color</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-68" class="cell" data-execution_count="43">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>color_good <span class="op">=</span> <span class="st">'</span><span class="ch">\033</span><span class="st">[32m'</span>   <span class="co"># Dark Green for near-zero skew</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>color_okay <span class="op">=</span> <span class="st">'</span><span class="ch">\033</span><span class="st">[92m'</span>   <span class="co"># Light Green for slightly positive or slightly negative skew</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>color_bad <span class="op">=</span> <span class="st">'</span><span class="ch">\033</span><span class="st">[91m'</span>    <span class="co"># Maroon for significant skew</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>color_neutral <span class="op">=</span> <span class="st">'</span><span class="ch">\033</span><span class="st">[0m'</span> <span class="co"># Reset color</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>skewed_col <span class="op">=</span> []</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>sns.set_theme(context<span class="op">=</span><span class="st">'notebook'</span>, style<span class="op">=</span><span class="st">'white'</span>, palette<span class="op">=</span><span class="st">'dark'</span>, font<span class="op">=</span><span class="st">'sans-serif'</span>, font_scale<span class="op">=</span><span class="dv">1</span>, color_codes<span class="op">=</span><span class="va">True</span>, rc<span class="op">=</span><span class="va">None</span>)  </span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> continuous:</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>    univar_num(df1,i) </span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    skew_val <span class="op">=</span> df1[i].skew()</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    kurt<span class="op">=</span>df1[i].kurtosis()</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>    kurt_color <span class="op">=</span> kurtosis_color(kurt)</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> skewness_color(skew_val)</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>    skewed_col.append(i)</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n\n</span><span class="sc">{</span>color<span class="sc">}</span><span class="ss">Skew for </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>skew_val<span class="sc">:.4f}{</span>color_neutral<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>color<span class="sc">}</span><span class="ss">Kurtosis for </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>kurt<span class="sc">:.4f}{</span>color_neutral<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-41-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for floor_area_sqm is 0.3661
Kurtosis for floor_area_sqm is -0.3464

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-41-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for resale_price is 0.9422
Kurtosis for resale_price is 1.3735

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-41-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for price_per_sqm is 1.0728
Kurtosis for price_per_sqm is 2.0849

</code></pre>
</div>
</div>
</section>
<section id="categorical-features-distribution" class="level3">
<h3 class="anchored" data-anchor-id="categorical-features-distribution">Categorical features Distribution</h3>
<div id="cell-70" class="cell" data-execution_count="44">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> categorical:</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">4</span>))</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    sns.countplot(data<span class="op">=</span>df1, x<span class="op">=</span>df1[i], hue<span class="op">=</span>i, order <span class="op">=</span> df1[i].value_counts().index.tolist()[::<span class="op">-</span><span class="dv">1</span>],palette<span class="op">=</span><span class="st">'dark'</span>,legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    plt.xticks(rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-6.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-7.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-8.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-42-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="outliers-based-on-the-categorical" class="level3">
<h3 class="anchored" data-anchor-id="outliers-based-on-the-categorical">Outliers based on the Categorical</h3>
<div id="cell-74" class="cell" data-execution_count="45">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> categorical:</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">5</span>))</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(data<span class="op">=</span>df1,x<span class="op">=</span>i,y<span class="op">=</span><span class="st">"resale_price"</span>,hue<span class="op">=</span>i,palette<span class="op">=</span><span class="st">'dark'</span>,legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    plt.xticks(rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'</span><span class="sc">{</span>i<span class="sc">.</span>title()<span class="sc">}</span><span class="ss"> vs Resale Price'</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-6.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-7.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-8.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-44-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-75" class="cell" data-execution_count="46">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> categorical:</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">6</span>))</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(data<span class="op">=</span>df1,x<span class="op">=</span>i,y<span class="op">=</span><span class="st">"floor_area_sqm"</span>,hue<span class="op">=</span>i,palette<span class="op">=</span><span class="st">'dark'</span>,legend<span class="op">=</span><span class="va">False</span>,)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    plt.xticks(rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'</span><span class="sc">{</span>i<span class="sc">.</span>title()<span class="sc">}</span><span class="ss"> vs Floor Area SQM'</span>)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-6.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-7.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-8.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-45-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-76" class="cell" data-execution_count="47">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">'test'</span>] <span class="op">=</span> df1[<span class="st">'flat_type'</span>].<span class="bu">str</span>.extract(<span class="vs">r'(\d+)'</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">'test'</span>] <span class="op">=</span> df1[<span class="st">'test'</span>].fillna(<span class="dv">0</span>).astype(<span class="st">'int8'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Combine storey range and bedroom to analyse outlier</p>
<div id="cell-78" class="cell" data-execution_count="48">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">'pe'</span>] <span class="op">=</span> df1.floor_area_sqm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-79" class="cell" data-scrolled="true" data-execution_count="49">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>filtered_df <span class="op">=</span> df1[(df1[<span class="st">'floor_area_sqm'</span>] <span class="op">/</span> df1[<span class="st">'test'</span>] <span class="op">&gt;</span><span class="dv">1</span>) <span class="op">&amp;</span> (df1[<span class="st">'floor_area_sqm'</span>] <span class="op">/</span> df1[<span class="st">'test'</span>] <span class="op">&lt;</span> <span class="dv">0</span>)]</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>filtered_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">town</th>
<th data-quarto-table-cell-role="th">flat_type</th>
<th data-quarto-table-cell-role="th">floor_area_sqm</th>
<th data-quarto-table-cell-role="th">storey_range</th>
<th data-quarto-table-cell-role="th">flat_model</th>
<th data-quarto-table-cell-role="th">lease_commence_date</th>
<th data-quarto-table-cell-role="th">resale_price</th>
<th data-quarto-table-cell-role="th">floor_area_category</th>
<th data-quarto-table-cell-role="th">price_per_sqm</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month_number</th>
<th data-quarto-table-cell-role="th">full_address</th>
<th data-quarto-table-cell-role="th">remaining_lease_year</th>
<th data-quarto-table-cell-role="th">test</th>
<th data-quarto-table-cell-role="th">pe</th>
</tr>
</thead>
<tbody>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-80" class="cell" data-execution_count="50">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>df1.sample(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">town</th>
<th data-quarto-table-cell-role="th">flat_type</th>
<th data-quarto-table-cell-role="th">floor_area_sqm</th>
<th data-quarto-table-cell-role="th">storey_range</th>
<th data-quarto-table-cell-role="th">flat_model</th>
<th data-quarto-table-cell-role="th">lease_commence_date</th>
<th data-quarto-table-cell-role="th">resale_price</th>
<th data-quarto-table-cell-role="th">floor_area_category</th>
<th data-quarto-table-cell-role="th">price_per_sqm</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month_number</th>
<th data-quarto-table-cell-role="th">full_address</th>
<th data-quarto-table-cell-role="th">remaining_lease_year</th>
<th data-quarto-table-cell-role="th">test</th>
<th data-quarto-table-cell-role="th">pe</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">90669</td>
<td>Choa Chu Kang</td>
<td>5 Room</td>
<td>113.0</td>
<td>04 TO 06</td>
<td>Improved</td>
<td>2016</td>
<td>520000.0</td>
<td>Large</td>
<td>4601.769912</td>
<td>2021</td>
<td>2</td>
<td>488D Choa Chu Kang Ave 5 Choa Chu Kang</td>
<td>94</td>
<td>5</td>
<td>113.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27457</td>
<td>Pasir Ris</td>
<td>5 Room</td>
<td>125.0</td>
<td>10 TO 12</td>
<td>Improved</td>
<td>1996</td>
<td>365000.0</td>
<td>Very Large</td>
<td>2920.000000</td>
<td>2000</td>
<td>10</td>
<td>768 Pasir Ris St 71 Pasir Ris</td>
<td>95</td>
<td>5</td>
<td>125.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">127753</td>
<td>Geylang</td>
<td>3 Room</td>
<td>74.0</td>
<td>10 TO 12</td>
<td>Model A</td>
<td>1984</td>
<td>225000.0</td>
<td>Medium</td>
<td>3040.540541</td>
<td>2003</td>
<td>9</td>
<td>58 Dakota Cres Geylang</td>
<td>80</td>
<td>3</td>
<td>74.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="word-cloud---checking-the-frequency-in-the-categorical-data" class="level3">
<h3 class="anchored" data-anchor-id="word-cloud---checking-the-frequency-in-the-categorical-data">Word Cloud - Checking the frequency in the categorical data</h3>
<section id="frequency-of-flat-type-and-flat-model" class="level4">
<h4 class="anchored" data-anchor-id="frequency-of-flat-type-and-flat-model">Frequency of Flat Type and Flat Model</h4>
<div id="cell-83" class="cell" data-execution_count="51">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>Flat_type <span class="op">=</span> Counter(df1[<span class="st">'flat_type'</span>])</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>Flat_model <span class="op">=</span> Counter(df1[<span class="st">'flat_model'</span>])</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>wordCloud_Flat_type <span class="op">=</span> WordCloud(width<span class="op">=</span> <span class="dv">5000</span>, height <span class="op">=</span> <span class="dv">2500</span>, random_state<span class="op">=</span><span class="dv">1</span>, background_color<span class="op">=</span><span class="st">'#0A1B27'</span>,</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>           colormap<span class="op">=</span><span class="st">'cool'</span>, collocations<span class="op">=</span><span class="va">False</span>, stopwords <span class="op">=</span> STOPWORDS)</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>wordCloud_Flat_type.generate_from_frequencies(Flat_type)</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Add this line to create wordCloud_Flat_model</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>wordCloud_Flat_model <span class="op">=</span> WordCloud(width<span class="op">=</span> <span class="dv">5000</span>, height <span class="op">=</span> <span class="dv">2500</span>, random_state<span class="op">=</span><span class="dv">1</span>, background_color<span class="op">=</span><span class="st">'#0A1B27'</span>,</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>           colormap<span class="op">=</span><span class="st">'cool'</span>, collocations<span class="op">=</span><span class="va">False</span>, stopwords <span class="op">=</span> STOPWORDS)</span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>wordCloud_Flat_model.generate_from_frequencies(Flat_model)</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">6</span>))</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>plt.imshow(wordCloud_Flat_type, interpolation<span class="op">=</span><span class="st">'bilinear'</span>,cmap<span class="op">=</span><span class="st">'Blues'</span>)</span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>plt.imshow(wordCloud_Flat_model, interpolation<span class="op">=</span><span class="st">'bilinear'</span>)</span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-50-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="frequency-of-town-and-storey" class="level4">
<h4 class="anchored" data-anchor-id="frequency-of-town-and-storey">Frequency of Town and Storey</h4>
<div id="cell-85" class="cell" data-execution_count="52">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>town <span class="op">=</span> Counter(df1[<span class="st">'town'</span>])</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>full_address <span class="op">=</span> Counter(df[<span class="st">'Avg_storey_range'</span>].astype(<span class="st">'str'</span>))</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>wordCloud_town <span class="op">=</span> WordCloud(width<span class="op">=</span> <span class="dv">5000</span>, height <span class="op">=</span> <span class="dv">3000</span>, random_state<span class="op">=</span><span class="dv">1</span>, background_color<span class="op">=</span><span class="st">'#0A1B27'</span>,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>           colormap<span class="op">=</span><span class="st">'cool'</span>, collocations<span class="op">=</span><span class="va">False</span>, stopwords <span class="op">=</span> STOPWORDS)</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>wordCloud_town.generate_from_frequencies(town)</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Add this line to create wordCloud_Flat_model</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>wordCloud_full_address <span class="op">=</span> WordCloud(width<span class="op">=</span> <span class="dv">5000</span>, height <span class="op">=</span> <span class="dv">3000</span>, random_state<span class="op">=</span><span class="dv">1</span>, background_color<span class="op">=</span><span class="st">'#0A1B27'</span>,</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>           colormap<span class="op">=</span><span class="st">'cool'</span>, collocations<span class="op">=</span><span class="va">False</span>, stopwords <span class="op">=</span> STOPWORDS)</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>wordCloud_full_address.generate_from_frequencies(full_address)</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">6</span>))</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>plt.imshow(wordCloud_town, interpolation<span class="op">=</span><span class="st">'bilinear'</span>,cmap<span class="op">=</span><span class="st">'Blues'</span>)</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Town Frequency'</span>)</span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>plt.imshow(wordCloud_full_address, interpolation<span class="op">=</span><span class="st">'bilinear'</span>)</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Town Frequency'</span>)</span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-51-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="resale-price-analysis" class="level3">
<h3 class="anchored" data-anchor-id="resale-price-analysis">Resale Price Analysis</h3>
<div id="cell-87" class="cell" data-execution_count="53">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.formula.api <span class="im">import</span> ols</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> analyze_categorical_relationship(df, continuous_var, categorical_var):</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform one-way ANOVA</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> ols(<span class="ss">f'</span><span class="sc">{</span>continuous_var<span class="sc">}</span><span class="ss"> ~ C(</span><span class="sc">{</span>categorical_var<span class="sc">}</span><span class="ss">)'</span>, data<span class="op">=</span>df).fit()</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>    anova_table <span class="op">=</span> sm.stats.anova_lm(model, typ<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate eta-squared (effect size)</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>    ssr <span class="op">=</span> anova_table.loc[<span class="st">'C('</span> <span class="op">+</span> categorical_var <span class="op">+</span> <span class="st">')'</span>, <span class="st">'sum_sq'</span>]</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>    sst <span class="op">=</span> ssr <span class="op">+</span> anova_table.loc[<span class="st">'Residual'</span>, <span class="st">'sum_sq'</span>]</span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>    eta_squared <span class="op">=</span> ssr <span class="op">/</span> sst</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert eta-squared to percentage</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>    significance_percentage <span class="op">=</span> eta_squared <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Determine if there's a significant relationship</span></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>    p_value <span class="op">=</span> anova_table.loc[<span class="st">'C('</span> <span class="op">+</span> categorical_var <span class="op">+</span> <span class="st">')'</span>, <span class="st">'PR(&gt;F)'</span>]</span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>    alpha <span class="op">=</span> <span class="fl">0.05</span>  <span class="co"># significance level</span></span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>    is_significant <span class="op">=</span> p_value <span class="op">&lt;</span> alpha</span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Relationship between </span><span class="sc">{</span>continuous_var<span class="sc">}</span><span class="ss"> and </span><span class="sc">{</span>categorical_var<span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"ANOVA: F-statistic = </span><span class="sc">{</span>anova_table<span class="sc">.</span>loc[<span class="st">'C('</span> <span class="op">+</span> categorical_var <span class="op">+</span> <span class="st">')'</span>, <span class="st">'F'</span>]<span class="sc">:.4f}</span><span class="ss">, p-value = </span><span class="sc">{</span>p_value<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>categorical_var<span class="sc">}</span><span class="ss"> has </span><span class="sc">{</span>significance_percentage<span class="sc">:.2f}</span><span class="ss">% significance with </span><span class="sc">{</span>continuous_var<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"There is </span><span class="sc">{</span><span class="st">'a'</span> <span class="cf">if</span> is_significant <span class="cf">else</span> <span class="st">'no'</span><span class="sc">}</span><span class="ss"> statistically significant relationship between </span><span class="sc">{</span>categorical_var<span class="sc">}</span><span class="ss"> and </span><span class="sc">{</span>continuous_var<span class="sc">}</span><span class="ss">."</span>)</span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze relationships</span></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cat_var <span class="kw">in</span> categorical:</span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a>    analyze_categorical_relationship(df, <span class="st">'resale_price'</span>, cat_var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Relationship between resale_price and year:
ANOVA: F-statistic = 30875.3446, p-value = 0.0000
year has 53.09% significance with resale_price
There is a statistically significant relationship between year and resale_price.

Relationship between resale_price and month_number:
ANOVA: F-statistic = 49.4007, p-value = 0.0000
month_number has 0.06% significance with resale_price
There is a statistically significant relationship between month_number and resale_price.

Relationship between resale_price and town:
ANOVA: F-statistic = 3585.7858, p-value = 0.0000
town has 9.13% significance with resale_price
There is a statistically significant relationship between town and resale_price.

Relationship between resale_price and flat_type:
ANOVA: F-statistic = 83626.7422, p-value = 0.0000
flat_type has 35.11% significance with resale_price
There is a statistically significant relationship between flat_type and resale_price.

Relationship between resale_price and flat_model:
ANOVA: F-statistic = 16073.8675, p-value = 0.0000
flat_model has 25.74% significance with resale_price
There is a statistically significant relationship between flat_model and resale_price.

Relationship between resale_price and storey_range:
ANOVA: F-statistic = 3995.6672, p-value = 0.0000
storey_range has 9.37% significance with resale_price
There is a statistically significant relationship between storey_range and resale_price.

Relationship between resale_price and lease_commence_date:
ANOVA: F-statistic = 8218.6932, p-value = 0.0000
lease_commence_date has 32.37% significance with resale_price
There is a statistically significant relationship between lease_commence_date and resale_price.

Relationship between resale_price and remaining_lease_year:
ANOVA: F-statistic = 804.1249, p-value = 0.0000
remaining_lease_year has 4.95% significance with resale_price
There is a statistically significant relationship between remaining_lease_year and resale_price.

Relationship between resale_price and floor_area_category:
ANOVA: F-statistic = 119775.8518, p-value = 0.0000
floor_area_category has 27.92% significance with resale_price
There is a statistically significant relationship between floor_area_category and resale_price.
</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-89-1-5a3cc2b6-1fd3-4a53-8a61-44dae9850de5.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<div id="cell-90" class="cell" data-execution_count="54">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">5</span>))</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>sns.stripplot(data<span class="op">=</span>df1, x<span class="op">=</span><span class="st">"year"</span>, y<span class="op">=</span><span class="st">"resale_price"</span>, hue<span class="op">=</span><span class="st">"flat_type"</span>,palette<span class="op">=</span><span class="st">'dark'</span>,s<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-54-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-91" class="cell" data-execution_count="55">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">5</span>))</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>sns.stripplot(data<span class="op">=</span>df1, x<span class="op">=</span><span class="st">"flat_type"</span>, y<span class="op">=</span><span class="st">"resale_price"</span>, hue<span class="op">=</span><span class="st">"flat_type"</span>,palette<span class="op">=</span><span class="st">'dark'</span>,s<span class="op">=</span><span class="dv">3</span>, legend<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-55-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-92" class="cell" data-execution_count="56">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">5</span>))</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>sns.stripplot(data<span class="op">=</span>df1, x<span class="op">=</span><span class="st">"storey_range"</span>, y<span class="op">=</span><span class="st">"resale_price"</span>, hue<span class="op">=</span><span class="st">"storey_range"</span>,palette<span class="op">=</span><span class="st">'dark'</span>,s<span class="op">=</span><span class="dv">3</span>, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-56-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="floor-area-sqm-analysis" class="level3">
<h3 class="anchored" data-anchor-id="floor-area-sqm-analysis">Floor Area SQM Analysis</h3>
<div id="cell-94" class="cell" data-execution_count="57">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>sns.set_theme( font_scale<span class="op">=</span><span class="dv">1</span>)  </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co"># categorical.remove('floor_area_sqm')</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> categorical:</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">25</span>, <span class="dv">5</span>))</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>df1.groupby(i,observed<span class="op">=</span><span class="va">False</span>)[<span class="st">'floor_area_sqm'</span>].median().reset_index().sort_values(<span class="st">'floor_area_sqm'</span>)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    sns.barplot(data<span class="op">=</span>data, x<span class="op">=</span>data[i], y<span class="op">=</span>data[<span class="st">'floor_area_sqm'</span>],hue<span class="op">=</span>i, order <span class="op">=</span>data[i],legend<span class="op">=</span><span class="va">False</span>,palette<span class="op">=</span><span class="st">'dark'</span>,)</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    plt.xticks(rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Average Floor Area SQM by </span><span class="sc">{</span>i<span class="sc">.</span>title()<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="co"># categorical.append('floor_area_sqm')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-6.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-7.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-8.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-57-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="relationship-between-continuous-features-and-target" class="level3">
<h3 class="anchored" data-anchor-id="relationship-between-continuous-features-and-target">Relationship Between Continuous Features and Target</h3>
<div id="cell-96" class="cell" data-execution_count="73">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>sns.set_theme(context<span class="op">=</span><span class="st">'notebook'</span>, style<span class="op">=</span><span class="st">'white'</span>, palette<span class="op">=</span><span class="st">'dark'</span>, font<span class="op">=</span><span class="st">'DeJaVu Sans Mono'</span>, font_scale<span class="op">=</span><span class="dv">2</span>,color_codes<span class="op">=</span><span class="va">True</span>, rc<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>total_var<span class="op">=</span><span class="bu">len</span>(continuous)</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>plot_col<span class="op">=</span><span class="dv">3</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>plot_row<span class="op">=</span>math.ceil(total_var <span class="op">/</span> <span class="dv">3</span>)</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(plot_row, plot_col, figsize<span class="op">=</span>(<span class="dv">50</span>, <span class="dv">8</span>))</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>axes <span class="op">=</span> axes.flatten()</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, var <span class="kw">in</span>  <span class="bu">enumerate</span>(continuous):</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>    sns.scatterplot(data<span class="op">=</span>df1, x<span class="op">=</span>var, y<span class="op">=</span><span class="st">"resale_price"</span>, color<span class="op">=</span><span class="st">'maroon'</span>,ax<span class="op">=</span>axes[i],s<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    axes[i].set_title(<span class="ss">f'Scatter plot: </span><span class="sc">{</span>var<span class="sc">}</span><span class="ss"> vs Resale Price'</span>)</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(i <span class="op">+</span> <span class="dv">1</span>, <span class="bu">len</span>(axes)):</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>    fig.delaxes(axes[i])</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>sns.set_theme(context<span class="op">=</span><span class="st">'notebook'</span>, style<span class="op">=</span><span class="st">'white'</span>, palette<span class="op">=</span><span class="st">'dark'</span>, font<span class="op">=</span><span class="st">'sans-serif'</span>, font_scale<span class="op">=</span><span class="dv">1</span>,color_codes<span class="op">=</span><span class="va">True</span>, rc<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-58-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="relationship-between-categorical-features-and-target" class="level3">
<h3 class="anchored" data-anchor-id="relationship-between-categorical-features-and-target">Relationship Between Categorical Features and Target</h3>
<div id="cell-98" class="cell" data-execution_count="59">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>sns.set_theme( font_scale<span class="op">=</span><span class="dv">1</span>)  </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> categorical:</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">25</span>, <span class="dv">5</span>))</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>df1.groupby(i,observed<span class="op">=</span><span class="va">False</span>)[<span class="st">'resale_price'</span>].median().reset_index().sort_values(<span class="st">'resale_price'</span>)</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    sns.barplot(data<span class="op">=</span>data, x<span class="op">=</span>data[i], y<span class="op">=</span>data[<span class="st">'resale_price'</span>],hue<span class="op">=</span>i, order <span class="op">=</span>data[i],legend<span class="op">=</span><span class="va">False</span>,palette<span class="op">=</span><span class="st">'dark'</span>,)</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    plt.xticks(rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Average resale_price by </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-6.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-7.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-8.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-59-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="pair-plot" class="level3">
<h3 class="anchored" data-anchor-id="pair-plot">Pair Plot</h3>
<div id="cell-100" class="cell" data-execution_count="66">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">18</span>,<span class="dv">20</span>))</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>sns.pairplot(data<span class="op">=</span>df1)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 1800x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-60-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resale-price-by-flat-type-and-lease-commence-date" class="level3">
<h3 class="anchored" data-anchor-id="resale-price-by-flat-type-and-lease-commence-date">Resale Price by Flat Type and Lease Commence Date</h3>
<div id="cell-102" class="cell" data-execution_count="82">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">4</span>))</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> df1, x <span class="op">=</span><span class="st">'lease_commence_date'</span>, y <span class="op">=</span> <span class="st">'resale_price'</span>,hue<span class="op">=</span><span class="st">'flat_type'</span>,style<span class="op">=</span><span class="st">"flat_type"</span>,palette<span class="op">=</span>[<span class="st">'yellow'</span>,<span class="st">'aqua'</span>,<span class="st">'purple'</span>,<span class="st">'black'</span>,<span class="st">'orange'</span>,<span class="st">'darkgreen'</span>,<span class="st">'maroon'</span>])</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Resale Price Lease Commence Date and Flat Type"</span>)</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> df1, x <span class="op">=</span><span class="st">'lease_commence_date'</span>, y <span class="op">=</span> <span class="st">'resale_price'</span>,color<span class="op">=</span><span class="st">'maroon'</span>)</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Resale Price by Lease Commence Date"</span>)</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-61-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resale-price-by-year-and-flat-type" class="level3">
<h3 class="anchored" data-anchor-id="resale-price-by-year-and-flat-type">Resale Price by Year and Flat Type</h3>
<div id="cell-104" class="cell" data-execution_count="83">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">4</span>))</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> df1, x <span class="op">=</span><span class="st">'year'</span>, y <span class="op">=</span> <span class="st">'resale_price'</span>,hue<span class="op">=</span><span class="st">'flat_type'</span>,style<span class="op">=</span><span class="st">"flat_type"</span>,palette<span class="op">=</span>[<span class="st">'yellow'</span>,<span class="st">'aqua'</span>,<span class="st">'purple'</span>,<span class="st">'black'</span>,<span class="st">'orange'</span>,<span class="st">'darkgreen'</span>,<span class="st">'maroon'</span>])</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Resale Price Per Year and Flat Type"</span>)</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> df1, x <span class="op">=</span><span class="st">'year'</span>, y <span class="op">=</span> <span class="st">'resale_price'</span>,color<span class="op">=</span><span class="st">'maroon'</span>)</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Resale Price Per Year"</span>)</span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-62-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resale-price-by-avg_storey_range-and-flat-type" class="level3">
<h3 class="anchored" data-anchor-id="resale-price-by-avg_storey_range-and-flat-type">Resale Price by Avg_storey_range and Flat Type</h3>
<div id="cell-106" class="cell" data-execution_count="60">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">4</span>))</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> df1, x <span class="op">=</span><span class="st">'storey_range'</span>, y <span class="op">=</span> <span class="st">'resale_price'</span>,hue<span class="op">=</span><span class="st">'flat_type'</span>,style<span class="op">=</span><span class="st">"flat_type"</span>,palette<span class="op">=</span><span class="st">'dark'</span>)</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Resale Price by Year and Storey Range"</span>)</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> df1, x <span class="op">=</span><span class="st">'storey_range'</span>, y <span class="op">=</span> <span class="st">'resale_price'</span>,color<span class="op">=</span><span class="st">'maroon'</span>)</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Resale Price Per Year"</span>)</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-63-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resale-price-by-remaining_lease_year-and-flat-type" class="level3">
<h3 class="anchored" data-anchor-id="resale-price-by-remaining_lease_year-and-flat-type">Resale Price by remaining_lease_year and Flat Type</h3>
<div id="cell-108" class="cell" data-execution_count="75">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>sns.set_theme( font_scale<span class="op">=</span><span class="dv">1</span>,font<span class="op">=</span><span class="st">'Hack Nerd Font'</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">4</span>))</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> df1, x <span class="op">=</span><span class="st">'remaining_lease_year'</span>, y <span class="op">=</span> <span class="st">'resale_price'</span>,hue<span class="op">=</span><span class="st">'flat_type'</span>,style<span class="op">=</span><span class="st">"flat_type"</span>,palette<span class="op">=</span><span class="st">'dark'</span>)</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Resale Price by Year and Storey Range"</span>)</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> df1, x <span class="op">=</span><span class="st">'remaining_lease_year'</span>, y <span class="op">=</span> <span class="st">'resale_price'</span>,color<span class="op">=</span><span class="st">'maroon'</span>)</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Resale Price Per Year"</span>)</span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-64-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="normality-test" class="level3">
<h3 class="anchored" data-anchor-id="normality-test">Normality Test</h3>
<div id="cell-110" class="cell" data-execution_count="63">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>continuous <span class="op">=</span> [<span class="st">'floor_area_sqm'</span>, <span class="st">'price_per_sqm'</span>, <span class="st">'resale_price'</span>,]</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var <span class="kw">in</span> continuous:</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    stat, p <span class="op">=</span> kstest(df1[var], <span class="st">'norm'</span>, args<span class="op">=</span>(df1[var].mean(), df1[var].std()))</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'K-S Test for </span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">: Statistics=</span><span class="sc">{</span>stat<span class="sc">}</span><span class="ss">, p=</span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p <span class="op">&gt;</span> <span class="fl">0.05</span>:</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss"> looks normally distributed.</span><span class="ch">\n</span><span class="ss">'</span>)</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss"> does not look normally distributed.</span><span class="ch">\n</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>K-S Test for floor_area_sqm: Statistics=0.09941099273674198, p=0.0
floor_area_sqm does not look normally distributed.

K-S Test for price_per_sqm: Statistics=0.09489535653294501, p=0.0
price_per_sqm does not look normally distributed.

K-S Test for resale_price: Statistics=0.059450367412785865, p=0.0
resale_price does not look normally distributed.
</code></pre>
</div>
</div>
<div id="cell-111" class="cell" data-scrolled="true" data-execution_count="64">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> skew, kurtosis</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var <span class="kw">in</span> continuous:</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>    skewness <span class="op">=</span> skew(df1[var])</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    kurt <span class="op">=</span> kurtosis(df1[var])</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss"> - Skewness: </span><span class="sc">{</span>skewness<span class="sc">}</span><span class="ss">, Kurtosis: </span><span class="sc">{</span>kurt<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">abs</span>(skewness) <span class="op">&lt;</span> <span class="fl">0.5</span> <span class="kw">and</span> <span class="bu">abs</span>(kurt) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss"> looks normally distributed.</span><span class="ch">\n</span><span class="ss">'</span>)</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss"> does not look normally distributed.</span><span class="ch">\n</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>floor_area_sqm - Skewness: 0.3660709490993199, Kurtosis: -0.34641220087085633
floor_area_sqm looks normally distributed.

price_per_sqm - Skewness: 1.0728419731408791, Kurtosis: 2.0848609936408025
price_per_sqm does not look normally distributed.

resale_price - Skewness: 0.9421620158728324, Kurtosis: 1.373502157753908
resale_price does not look normally distributed.
</code></pre>
</div>
</div>
<div id="cell-112" class="cell" data-scrolled="true" data-execution_count="65">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>cor_col <span class="op">=</span> df1.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>correlation_matrix_pear <span class="op">=</span> cor_col.corr()</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">4</span>))</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>sns.heatmap(correlation_matrix_pear,annot<span class="op">=</span><span class="va">True</span>,fmt<span class="op">=</span><span class="st">'.2f'</span>,cmap<span class="op">=</span><span class="st">'coolwarm'</span>)</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Pearson Correlation Matrix'</span>)</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>cor_col <span class="op">=</span> df1.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>)</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="op">=</span> cor_col.corr(method<span class="op">=</span><span class="st">'spearman'</span>)</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>sns.heatmap(correlation_matrix,annot<span class="op">=</span><span class="va">True</span>,fmt<span class="op">=</span><span class="st">'.2f'</span>,cmap<span class="op">=</span><span class="st">'coolwarm'</span>)</span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Spearman Correlation Matrix'</span>)</span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-67-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="experimenting-with-a-few-types-of-data-transformation-techniques-to-see-which-one-suits-best." class="level3">
<h3 class="anchored" data-anchor-id="experimenting-with-a-few-types-of-data-transformation-techniques-to-see-which-one-suits-best.">Experimenting with a few types of data transformation techniques to see which one suits best.</h3>
<div id="cell-114" class="cell" data-execution_count="66">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>skew_dict<span class="op">=</span><span class="bu">dict</span>(df1[continuous].skew())</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>skew_dict</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>{'floor_area_sqm': 0.3660726547241211,
 'price_per_sqm': 1.072843708264345,
 'resale_price': 0.942163539645637}</code></pre>
</div>
</div>
<div id="cell-115" class="cell" data-execution_count="67">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> boxcox_transform(x):</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform Box-Cox transformation</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    transformed_data,lmbda <span class="op">=</span> boxcox(x)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> transformed_data,lmbda</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-116" class="cell" data-execution_count="68">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>method_functions <span class="op">=</span>  {</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'log'</span>: np.log,</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'square'</span>: np.sqrt,</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'rec'</span>: <span class="kw">lambda</span> x: <span class="dv">1</span> <span class="op">/</span> x,</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'sig'</span>: <span class="kw">lambda</span> x: <span class="dv">1</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> np.exp(<span class="op">-</span>x)),</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'pow'</span>: <span class="kw">lambda</span> x: np.power(x, <span class="dv">2</span>),</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'exp'</span>:<span class="kw">lambda</span> x: x<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">5</span>),</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'boxcox'</span>: boxcox_transform,</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> skewness_checker(df, column, method):</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>    normalized_df<span class="op">=</span>pd.DataFrame()</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> method_name, func <span class="kw">in</span> method_functions.items():</span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> col <span class="kw">in</span> column:</span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a>            new_column <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>method_name<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> method_name <span class="kw">in</span> [<span class="st">'boxcox'</span>]:</span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a>                transformed_values <span class="op">=</span> func(df[col])[<span class="dv">0</span>]</span>
<span id="cb90-20"><a href="#cb90-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb90-21"><a href="#cb90-21" aria-hidden="true" tabindex="-1"></a>                transformed_values <span class="op">=</span> func(df[col])</span>
<span id="cb90-22"><a href="#cb90-22" aria-hidden="true" tabindex="-1"></a>            normalized_df[new_column] <span class="op">=</span> transformed_values</span>
<span id="cb90-23"><a href="#cb90-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-24"><a href="#cb90-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> normalized_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-117" class="cell" data-execution_count="69">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>normalized_df<span class="op">=</span>skewness_checker(df1, continuous, method_functions)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>normalized_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="69">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">floor_area_sqm_log</th>
<th data-quarto-table-cell-role="th">price_per_sqm_log</th>
<th data-quarto-table-cell-role="th">resale_price_log</th>
<th data-quarto-table-cell-role="th">floor_area_sqm_square</th>
<th data-quarto-table-cell-role="th">price_per_sqm_square</th>
<th data-quarto-table-cell-role="th">resale_price_square</th>
<th data-quarto-table-cell-role="th">floor_area_sqm_rec</th>
<th data-quarto-table-cell-role="th">price_per_sqm_rec</th>
<th data-quarto-table-cell-role="th">resale_price_rec</th>
<th data-quarto-table-cell-role="th">floor_area_sqm_sig</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">resale_price_sig</th>
<th data-quarto-table-cell-role="th">floor_area_sqm_pow</th>
<th data-quarto-table-cell-role="th">price_per_sqm_pow</th>
<th data-quarto-table-cell-role="th">resale_price_pow</th>
<th data-quarto-table-cell-role="th">floor_area_sqm_exp</th>
<th data-quarto-table-cell-role="th">price_per_sqm_exp</th>
<th data-quarto-table-cell-role="th">resale_price_exp</th>
<th data-quarto-table-cell-role="th">floor_area_sqm_boxcox</th>
<th data-quarto-table-cell-role="th">price_per_sqm_boxcox</th>
<th data-quarto-table-cell-role="th">resale_price_boxcox</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>3.433987</td>
<td>5.670993</td>
<td>9.104980</td>
<td>5.567764</td>
<td>17.038855</td>
<td>94.868330</td>
<td>0.032258</td>
<td>0.003444</td>
<td>0.000111</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>961.0</td>
<td>8.428720e+04</td>
<td>8.100000e+07</td>
<td>1.987341</td>
<td>3.108681</td>
<td>6.178009</td>
<td>6.593803</td>
<td>21.894497</td>
<td>121.361716</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>3.433987</td>
<td>5.265528</td>
<td>8.699515</td>
<td>5.567764</td>
<td>13.912167</td>
<td>77.459667</td>
<td>0.032258</td>
<td>0.005167</td>
<td>0.000167</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>961.0</td>
<td>3.746098e+04</td>
<td>3.600000e+07</td>
<td>1.987341</td>
<td>2.866539</td>
<td>5.696791</td>
<td>6.593803</td>
<td>18.221192</td>
<td>101.219209</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3.433987</td>
<td>5.553210</td>
<td>8.987197</td>
<td>5.567764</td>
<td>16.064387</td>
<td>89.442719</td>
<td>0.032258</td>
<td>0.003875</td>
<td>0.000125</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>961.0</td>
<td>6.659729e+04</td>
<td>6.400000e+07</td>
<td>1.987341</td>
<td>3.036307</td>
<td>6.034176</td>
<td>6.593803</td>
<td>20.764940</td>
<td>115.137050</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>3.433987</td>
<td>5.265528</td>
<td>8.699515</td>
<td>5.567764</td>
<td>13.912167</td>
<td>77.459667</td>
<td>0.032258</td>
<td>0.005167</td>
<td>0.000167</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>961.0</td>
<td>3.746098e+04</td>
<td>3.600000e+07</td>
<td>1.987341</td>
<td>2.866539</td>
<td>5.696791</td>
<td>6.593803</td>
<td>18.221192</td>
<td>101.219209</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4.290460</td>
<td>6.471690</td>
<td>10.762149</td>
<td>8.544003</td>
<td>25.427846</td>
<td>217.255610</td>
<td>0.013699</td>
<td>0.001547</td>
<td>0.000021</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>5329.0</td>
<td>4.180597e+05</td>
<td>2.227840e+09</td>
<td>2.358656</td>
<td>3.648580</td>
<td>8.605744</td>
<td>9.865798</td>
<td>31.172901</td>
<td>253.461991</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">181257</td>
<td>4.718499</td>
<td>8.793200</td>
<td>13.511699</td>
<td>10.583005</td>
<td>81.174415</td>
<td>859.069264</td>
<td>0.008929</td>
<td>0.000152</td>
<td>0.000001</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>12544.0</td>
<td>4.341869e+07</td>
<td>5.446440e+11</td>
<td>2.569470</td>
<td>5.804538</td>
<td>14.914588</td>
<td>11.902491</td>
<td>83.257104</td>
<td>851.806525</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">181258</td>
<td>4.804021</td>
<td>8.625827</td>
<td>13.429848</td>
<td>11.045361</td>
<td>74.657689</td>
<td>824.621125</td>
<td>0.008197</td>
<td>0.000179</td>
<td>0.000001</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>14884.0</td>
<td>3.106692e+07</td>
<td>4.624000e+11</td>
<td>2.613798</td>
<td>5.613449</td>
<td>14.672421</td>
<td>12.346850</td>
<td>77.667050</td>
<td>821.690977</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">181259</td>
<td>4.983607</td>
<td>8.596182</td>
<td>13.579788</td>
<td>12.083046</td>
<td>73.559220</td>
<td>888.819442</td>
<td>0.006849</td>
<td>0.000185</td>
<td>0.000001</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>21316.0</td>
<td>2.927848e+07</td>
<td>6.241000e+11</td>
<td>2.709384</td>
<td>5.580265</td>
<td>15.119082</td>
<td>13.323874</td>
<td>76.715625</td>
<td>877.695601</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">181260</td>
<td>4.983607</td>
<td>8.831904</td>
<td>13.815511</td>
<td>12.083046</td>
<td>82.760589</td>
<td>1000.000000</td>
<td>0.006849</td>
<td>0.000146</td>
<td>0.000001</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>21316.0</td>
<td>4.691312e+07</td>
<td>1.000000e+12</td>
<td>2.709384</td>
<td>5.849644</td>
<td>15.848932</td>
<td>13.323874</td>
<td>84.604298</td>
<td>973.536281</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">181261</td>
<td>4.983607</td>
<td>8.831904</td>
<td>13.815511</td>
<td>12.083046</td>
<td>82.760589</td>
<td>1000.000000</td>
<td>0.006849</td>
<td>0.000146</td>
<td>0.000001</td>
<td>1.0</td>
<td>...</td>
<td>1.0</td>
<td>21316.0</td>
<td>4.691312e+07</td>
<td>1.000000e+12</td>
<td>2.709384</td>
<td>5.849644</td>
<td>15.848932</td>
<td>13.323874</td>
<td>84.604298</td>
<td>973.536281</td>
</tr>
</tbody>
</table>

<p>927465 rows × 21 columns</p>
</div>
</div>
</div>
<div id="cell-118" class="cell" data-execution_count="70">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>transformed_skewness <span class="op">=</span> {}</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>transformed_kurtosis <span class="op">=</span> {}</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> normalized_df.columns:</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>    univar_num(normalized_df,i)</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>    skews<span class="op">=</span>normalized_df[i].skew()</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    kurt<span class="op">=</span>normalized_df[i].kurtosis()</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>    transformed_skewness.update({i:skews})</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>    transformed_kurtosis.update({i:kurt})</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> color_neutral</span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">-</span><span class="fl">0.5</span> <span class="op">&lt;=</span> skews <span class="op">&lt;=</span> <span class="fl">0.5</span>:</span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_good  <span class="co"># Dark Green for near-zero skew</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">0</span> <span class="op">&lt;</span> skews <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="kw">or</span> <span class="op">-</span><span class="fl">0.5</span> <span class="op">&lt;</span> skews <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_okay  <span class="co"># Light Green for slightly positive or slightly negative skew</span></span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:  <span class="co"># skew_val &gt; 0.5 or skew_val &lt; -0.5</span></span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_bad  <span class="co"># Maroon for significant skew</span></span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n\n</span><span class="sc">{</span>color<span class="sc">}</span><span class="ss">Skew for </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>skews<span class="sc">:.2f}{</span>color_neutral<span class="sc">}</span><span class="ss">"</span>)    </span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="sc">{</span>color<span class="sc">}</span><span class="ss">Kurtosis for </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>kurt<span class="sc">:.2f}{</span>color_neutral<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span>)</span>
<span id="cb92-19"><a href="#cb92-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">'Skewness:</span><span class="ch">\n</span><span class="st">'</span>,transformed_skewness,<span class="st">'</span><span class="ch">\n\n</span><span class="st">'</span>,<span class="st">'Kurtois:</span><span class="ch">\n</span><span class="st">'</span>,transformed_kurtosis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for floor_area_sqm_log is -0.23

Kurtosis for floor_area_sqm_log is -0.36

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for price_per_sqm_log is -0.82

Kurtosis for price_per_sqm_log is 1.87

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for resale_price_log is -0.92

Kurtosis for resale_price_log is 1.61

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-7.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for floor_area_sqm_square is 0.08

Kurtosis for floor_area_sqm_square is -0.57

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for price_per_sqm_square is 0.22

Kurtosis for price_per_sqm_square is 0.57

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-11.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for resale_price_square is 0.11

Kurtosis for resale_price_square is 0.05

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-13.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for floor_area_sqm_rec is 1.10

Kurtosis for floor_area_sqm_rec is 3.00

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-15.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for price_per_sqm_rec is 4.09

Kurtosis for price_per_sqm_rec is 24.62

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-17.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for resale_price_rec is 7.24

Kurtosis for resale_price_rec is 112.40

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-19.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for floor_area_sqm_sig is 0.00

Kurtosis for floor_area_sqm_sig is 0.00

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-21.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for price_per_sqm_sig is 0.00

Kurtosis for price_per_sqm_sig is 0.00

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-23.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for resale_price_sig is 0.00

Kurtosis for resale_price_sig is 0.00

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-25.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for floor_area_sqm_pow is 1.00

Kurtosis for floor_area_sqm_pow is 1.66

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-27.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for price_per_sqm_pow is 2.99

Kurtosis for price_per_sqm_pow is 14.96

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-29.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for resale_price_pow is 2.81

Kurtosis for resale_price_pow is 13.23

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-31.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for floor_area_sqm_exp is -0.11

Kurtosis for floor_area_sqm_exp is -0.50

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-33.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for price_per_sqm_exp is -0.37

Kurtosis for price_per_sqm_exp is 0.93

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-35.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for resale_price_exp is -0.46

Kurtosis for resale_price_exp is 0.48

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-37.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for floor_area_sqm_boxcox is -0.02

Kurtosis for floor_area_sqm_boxcox is -0.55

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-39.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for price_per_sqm_boxcox is 0.04

Kurtosis for price_per_sqm_boxcox is 0.57

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/cell-72-output-41.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Skew for resale_price_boxcox is -0.00

Kurtosis for resale_price_boxcox is 0.05


Skewness:
 {'floor_area_sqm_log': -0.23334388, 'price_per_sqm_log': -0.8184514040088072, 'resale_price_log': -0.9240431018462136, 'floor_area_sqm_square': 0.07508402, 'price_per_sqm_square': 0.218400005682388, 'resale_price_square': 0.10918464819090822, 'floor_area_sqm_rec': 1.1036736, 'price_per_sqm_rec': 4.092842125511875, 'resale_price_rec': 7.24332894254145, 'floor_area_sqm_sig': 0.0, 'price_per_sqm_sig': 0.0, 'resale_price_sig': 0.0, 'floor_area_sqm_pow': 1.0026332, 'price_per_sqm_pow': 2.9859800621469907, 'resale_price_pow': 2.810519042318628, 'floor_area_sqm_exp': -0.10569635, 'price_per_sqm_exp': -0.3680042268192765, 'resale_price_exp': -0.4641821320745675, 'floor_area_sqm_boxcox': -0.016471082, 'price_per_sqm_boxcox': 0.037947014786446534, 'resale_price_boxcox': -0.0005540558944127643} 

 Kurtois:
 {'floor_area_sqm_log': -0.35770032, 'price_per_sqm_log': 1.868267357554061, 'resale_price_log': 1.6050165886358765, 'floor_area_sqm_square': -0.56573135, 'price_per_sqm_square': 0.5715862216712075, 'resale_price_square': 0.04932580507928508, 'floor_area_sqm_rec': 3.003057, 'price_per_sqm_rec': 24.622613203100077, 'resale_price_rec': 112.3990151551124, 'floor_area_sqm_sig': 0.0, 'price_per_sqm_sig': 0.0, 'resale_price_sig': 0.0, 'floor_area_sqm_pow': 1.6554761, 'price_per_sqm_pow': 14.957301786543844, 'resale_price_pow': 13.227158328215623, 'floor_area_sqm_exp': -0.50208616, 'price_per_sqm_exp': 0.9330433691507154, 'resale_price_exp': 0.4810888939170934, 'floor_area_sqm_boxcox': -0.5534841, 'price_per_sqm_boxcox': 0.5716198663925436, 'resale_price_boxcox': 0.04811205399150742}</code></pre>
</div>
</div>
<div id="cell-119" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>df1[df1.storey_range]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="handling-outliers" class="level2">
<h2 class="anchored" data-anchor-id="handling-outliers">Handling Outliers</h2>
<section id="function-to-handle-outliers-based-on-categorical-variables" class="level3">
<h3 class="anchored" data-anchor-id="function-to-handle-outliers-based-on-categorical-variables">Function to handle outliers based on categorical variables</h3>
<div id="cell-122" class="cell" data-execution_count="99">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> handle_outliers(df, continuous_var, categorical_vars, iqr_multiplier<span class="op">=</span><span class="fl">1.5</span>):</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>    outlier_count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Group by all categorical variables at once</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> df_copy.groupby(categorical_vars,observed<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> replace_outliers(group):</span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">nonlocal</span> outlier_count</span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>        Q1 <span class="op">=</span> group[continuous_var].quantile(<span class="fl">0.25</span>)</span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>        Q3 <span class="op">=</span> group[continuous_var].quantile(<span class="fl">0.75</span>)</span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>        IQR <span class="op">=</span> Q3 <span class="op">-</span> Q1</span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>        lower_bound <span class="op">=</span> Q1 <span class="op">-</span> iqr_multiplier <span class="op">*</span> IQR</span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>        upper_bound <span class="op">=</span> Q3 <span class="op">+</span> iqr_multiplier <span class="op">*</span> IQR</span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Count outliers</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>        outliers <span class="op">=</span> (group[continuous_var] <span class="op">&lt;</span> lower_bound) <span class="op">|</span> (group[continuous_var] <span class="op">&gt;</span> upper_bound)</span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>        outlier_count <span class="op">+=</span> outliers.<span class="bu">sum</span>()</span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Cap outliers instead of replacing with median</span></span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>        group.loc[group[continuous_var] <span class="op">&lt;</span> lower_bound, continuous_var] <span class="op">=</span> lower_bound</span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true" tabindex="-1"></a>        group.loc[group[continuous_var] <span class="op">&gt;</span> upper_bound, continuous_var] <span class="op">=</span> upper_bound</span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> group[continuous_var]</span>
<span id="cb115-25"><a href="#cb115-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-26"><a href="#cb115-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Apply the function and update only the continuous variable</span></span>
<span id="cb115-27"><a href="#cb115-27" aria-hidden="true" tabindex="-1"></a>    df_copy[continuous_var] <span class="op">=</span> grouped[continuous_var].transform(replace_outliers)</span>
<span id="cb115-28"><a href="#cb115-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-29"><a href="#cb115-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Total outliers handled: </span><span class="sc">{</span>outlier_count<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb115-30"><a href="#cb115-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="list-of-categorical-variables-that-influence-resale_price" class="level3">
<h3 class="anchored" data-anchor-id="list-of-categorical-variables-that-influence-resale_price">List of categorical variables that influence resale_price</h3>
<div id="cell-124" class="cell" data-execution_count="95">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>categorical_vars <span class="op">=</span> [<span class="st">'year'</span>,<span class="st">'flat_type'</span>,<span class="st">'town'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="apply-the-function-to-handle-outliers" class="level3">
<h3 class="anchored" data-anchor-id="apply-the-function-to-handle-outliers">Apply the function to handle outliers</h3>
<div id="cell-126" class="cell" data-execution_count="96">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>df1.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="96">
<pre><code>Index(['town', 'flat_type', 'floor_area_sqm', 'storey_range', 'flat_model',
       'lease_commence_date', 'resale_price', 'floor_area_category',
       'price_per_sqm', 'year', 'month_number', 'full_address',
       'remaining_lease_year', 'test', 'pe'],
      dtype='object')</code></pre>
</div>
</div>
<div id="cell-127" class="cell" data-scrolled="true" data-execution_count="97">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">'full_address'</span>] <span class="op">=</span> df1[<span class="st">'full_address'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">'floor_area_sqm'</span>] <span class="op">=</span> pd.to_numeric(df1[<span class="st">'floor_area_sqm'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">'floor_area_sqm'</span>] <span class="op">=</span> df1[<span class="st">'floor_area_sqm'</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>df1.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 927465 entries, 0 to 181261
Data columns (total 15 columns):
 #   Column                Non-Null Count   Dtype   
---  ------                --------------   -----   
 0   town                  927465 non-null  category
 1   flat_type             927465 non-null  category
 2   floor_area_sqm        927465 non-null  float64 
 3   storey_range          927465 non-null  category
 4   flat_model            927465 non-null  category
 5   lease_commence_date   927465 non-null  int32   
 6   resale_price          927465 non-null  float64 
 7   floor_area_category   927465 non-null  category
 8   price_per_sqm         927465 non-null  float64 
 9   year                  927465 non-null  int32   
 10  month_number          927465 non-null  int32   
 11  full_address          927465 non-null  category
 12  remaining_lease_year  927465 non-null  int32   
 13  test                  927465 non-null  int8    
 14  pe                    927465 non-null  float32 
dtypes: category(6), float32(1), float64(3), int32(4), int8(1)
memory usage: 85.7 MB</code></pre>
</div>
</div>
<div id="cell-128" class="cell" data-execution_count="103">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="103">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">town</th>
<th data-quarto-table-cell-role="th">flat_type</th>
<th data-quarto-table-cell-role="th">floor_area_sqm</th>
<th data-quarto-table-cell-role="th">storey_range</th>
<th data-quarto-table-cell-role="th">flat_model</th>
<th data-quarto-table-cell-role="th">lease_commence_date</th>
<th data-quarto-table-cell-role="th">resale_price</th>
<th data-quarto-table-cell-role="th">floor_area_category</th>
<th data-quarto-table-cell-role="th">price_per_sqm</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month_number</th>
<th data-quarto-table-cell-role="th">full_address</th>
<th data-quarto-table-cell-role="th">remaining_lease_year</th>
<th data-quarto-table-cell-role="th">test</th>
<th data-quarto-table-cell-role="th">pe</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Ang Mo Kio</td>
<td>1 Room</td>
<td>31.0</td>
<td>10 TO 12</td>
<td>Improved</td>
<td>1977</td>
<td>9000.0</td>
<td>Small</td>
<td>290.322581</td>
<td>1990</td>
<td>1</td>
<td>309 Ang Mo Kio Ave 1 Ang Mo Kio</td>
<td>86</td>
<td>1</td>
<td>31.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Ang Mo Kio</td>
<td>1 Room</td>
<td>31.0</td>
<td>04 TO 06</td>
<td>Improved</td>
<td>1977</td>
<td>6000.0</td>
<td>Small</td>
<td>193.548387</td>
<td>1990</td>
<td>1</td>
<td>309 Ang Mo Kio Ave 1 Ang Mo Kio</td>
<td>86</td>
<td>1</td>
<td>31.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Ang Mo Kio</td>
<td>1 Room</td>
<td>31.0</td>
<td>10 TO 12</td>
<td>Improved</td>
<td>1977</td>
<td>8000.0</td>
<td>Small</td>
<td>258.064516</td>
<td>1990</td>
<td>1</td>
<td>309 Ang Mo Kio Ave 1 Ang Mo Kio</td>
<td>86</td>
<td>1</td>
<td>31.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Ang Mo Kio</td>
<td>1 Room</td>
<td>31.0</td>
<td>07 TO 09</td>
<td>Improved</td>
<td>1977</td>
<td>6000.0</td>
<td>Small</td>
<td>193.548387</td>
<td>1990</td>
<td>1</td>
<td>309 Ang Mo Kio Ave 1 Ang Mo Kio</td>
<td>86</td>
<td>1</td>
<td>31.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Ang Mo Kio</td>
<td>3 Room</td>
<td>73.0</td>
<td>04 TO 06</td>
<td>New Generation</td>
<td>1976</td>
<td>47200.0</td>
<td>Small</td>
<td>646.575342</td>
<td>1990</td>
<td>1</td>
<td>216 Ang Mo Kio Ave 1 Ang Mo Kio</td>
<td>85</td>
<td>3</td>
<td>73.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">181257</td>
<td>Yishun</td>
<td>5 Room</td>
<td>112.0</td>
<td>10 TO 12</td>
<td>Improved</td>
<td>2018</td>
<td>738000.0</td>
<td>Large</td>
<td>6589.285714</td>
<td>2024</td>
<td>6</td>
<td>502B Yishun St 51 Yishun</td>
<td>93</td>
<td>5</td>
<td>112.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">181258</td>
<td>Yishun</td>
<td>5 Room</td>
<td>122.0</td>
<td>07 TO 09</td>
<td>Improved</td>
<td>1988</td>
<td>680000.0</td>
<td>Very Large</td>
<td>5573.770492</td>
<td>2024</td>
<td>6</td>
<td>865 Yishun St 81 Yishun</td>
<td>63</td>
<td>5</td>
<td>122.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">181259</td>
<td>Yishun</td>
<td>Executive</td>
<td>146.0</td>
<td>10 TO 12</td>
<td>Maisonette</td>
<td>1986</td>
<td>790000.0</td>
<td>Very Large</td>
<td>5410.958904</td>
<td>2024</td>
<td>6</td>
<td>723 Yishun St 71 Yishun</td>
<td>61</td>
<td>0</td>
<td>146.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">181260</td>
<td>Yishun</td>
<td>Executive</td>
<td>146.0</td>
<td>10 TO 12</td>
<td>Maisonette</td>
<td>1988</td>
<td>1000000.0</td>
<td>Very Large</td>
<td>6849.315068</td>
<td>2024</td>
<td>6</td>
<td>826 Yishun St 81 Yishun</td>
<td>63</td>
<td>0</td>
<td>146.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">181261</td>
<td>Yishun</td>
<td>Executive</td>
<td>146.0</td>
<td>04 TO 06</td>
<td>Maisonette</td>
<td>1988</td>
<td>1000000.0</td>
<td>Very Large</td>
<td>6849.315068</td>
<td>2024</td>
<td>6</td>
<td>826 Yishun St 81 Yishun</td>
<td>63</td>
<td>0</td>
<td>146.0</td>
</tr>
</tbody>
</table>

<p>927465 rows × 15 columns</p>
</div>
</div>
</div>
<div id="cell-129" class="cell" data-execution_count="110">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>grouped <span class="op">=</span> df1.groupby(categorical_vars,observed<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="co"># print(list(grouped))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-130" class="cell" data-execution_count="102">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df1_cleaned = handle_outliers(df1, 'resale_price', categorical_vars)</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="co"># df1_cleaned = handle_outliers(df1, 'floor_area_sqm', categorical_vars)</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>df1_cleaned <span class="op">=</span> handle_outliers(df1, <span class="st">'resale_price'</span>, categorical_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
File <span class="ansi-green-fg">~/f_drive/Technology/Python Project/Capstone/Singapore-Resale-Flat-Prices-Predicting/singapore/lib/python3.10/site-packages/pandas/core/indexes/base.py:3805</span>, in <span class="ansi-cyan-fg">Index.get_loc</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-fg ansi-bold">   3804</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">-&gt; 3805</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_engine</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">get_loc</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">casted_key</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg ansi-bold">   3806</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">KeyError</span> <span style="font-weight:bold;color:rgb(0,135,0)">as</span> err:

File <span class="ansi-green-fg">index.pyx:167</span>, in <span class="ansi-cyan-fg">pandas._libs.index.IndexEngine.get_loc</span><span class="ansi-blue-fg">()</span>

File <span class="ansi-green-fg">index.pyx:175</span>, in <span class="ansi-cyan-fg">pandas._libs.index.IndexEngine.get_loc</span><span class="ansi-blue-fg">()</span>

File <span class="ansi-green-fg">pandas/_libs/index_class_helper.pxi:70</span>, in <span class="ansi-cyan-fg">pandas._libs.index.Int64Engine._check_type</span><span class="ansi-blue-fg">()</span>

<span class="ansi-red-fg">KeyError</span>: 'resale_price'

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[102], line 3</span>
<span class="ansi-green-fg ansi-bold">      1</span> <span style="font-style:italic;color:rgb(95,135,135)"># df1_cleaned = handle_outliers(df1, 'resale_price', categorical_vars)</span>
<span class="ansi-green-fg ansi-bold">      2</span> <span style="font-style:italic;color:rgb(95,135,135)"># df1_cleaned = handle_outliers(df1, 'floor_area_sqm', categorical_vars)</span>
<span class="ansi-green-fg">----&gt; 3</span> df1_cleaned <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">handle_outliers</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">df1</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">resale_price</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">'</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">categorical_vars</span><span class="ansi-yellow-bg">)</span>

Cell <span class="ansi-green-fg">In[99], line 27</span>, in <span class="ansi-cyan-fg">handle_outliers</span><span class="ansi-blue-fg">(df, continuous_var, categorical_vars, iqr_multiplier)</span>
<span class="ansi-green-fg ansi-bold">     24</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> group[continuous_var]
<span class="ansi-green-fg ansi-bold">     26</span> <span style="font-style:italic;color:rgb(95,135,135)"># Apply the function and update only the continuous variable</span>
<span class="ansi-green-fg">---&gt; 27</span> df_copy[continuous_var] <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">grouped</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">continuous_var</span><span class="ansi-yellow-bg">]</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">transform</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">replace_outliers</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg ansi-bold">     29</span> <span style="color:rgb(0,135,0)">print</span>(<span style="color:rgb(175,0,0)">f</span><span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Total outliers handled: </span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>outlier_count<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg ansi-bold">     30</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> df_copy

File <span class="ansi-green-fg">~/f_drive/Technology/Python Project/Capstone/Singapore-Resale-Flat-Prices-Predicting/singapore/lib/python3.10/site-packages/pandas/core/groupby/generic.py:517</span>, in <span class="ansi-cyan-fg">SeriesGroupBy.transform</span><span class="ansi-blue-fg">(self, func, engine, engine_kwargs, *args, **kwargs)</span>
<span class="ansi-green-fg ansi-bold">    514</span> <span style="color:rgb(175,0,255)">@Substitution</span>(klass<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Series</span><span style="color:rgb(175,0,0)">"</span>, example<span style="color:rgb(98,98,98)">=</span>__examples_series_doc)
<span class="ansi-green-fg ansi-bold">    515</span> <span style="color:rgb(175,0,255)">@Appender</span>(_transform_template)
<span class="ansi-green-fg ansi-bold">    516</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">transform</span>(<span style="color:rgb(0,135,0)">self</span>, func, <span style="color:rgb(98,98,98)">*</span>args, engine<span style="color:rgb(98,98,98)">=</span><span style="font-weight:bold;color:rgb(0,135,0)">None</span>, engine_kwargs<span style="color:rgb(98,98,98)">=</span><span style="font-weight:bold;color:rgb(0,135,0)">None</span>, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs):
<span class="ansi-green-fg">--&gt; 517</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_transform</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg ansi-bold">    518</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">func</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">args</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">engine</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">engine</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">engine_kwargs</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">engine_kwargs</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span>
<span class="ansi-green-fg ansi-bold">    519</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/f_drive/Technology/Python Project/Capstone/Singapore-Resale-Flat-Prices-Predicting/singapore/lib/python3.10/site-packages/pandas/core/groupby/groupby.py:2021</span>, in <span class="ansi-cyan-fg">GroupBy._transform</span><span class="ansi-blue-fg">(self, func, engine, engine_kwargs, *args, **kwargs)</span>
<span class="ansi-green-fg ansi-bold">   2018</span>     warn_alias_replacement(<span style="color:rgb(0,135,0)">self</span>, orig_func, func)
<span class="ansi-green-fg ansi-bold">   2020</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="color:rgb(0,135,0)">isinstance</span>(func, <span style="color:rgb(0,135,0)">str</span>):
<span class="ansi-green-fg">-&gt; 2021</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_transform_general</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">func</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">engine</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">engine_kwargs</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">args</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg ansi-bold">   2023</span> <span style="font-weight:bold;color:rgb(0,135,0)">elif</span> func <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(175,0,255)">in</span> base<span style="color:rgb(98,98,98)">.</span>transform_kernel_allowlist:
<span class="ansi-green-fg ansi-bold">   2024</span>     msg <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(175,0,0)">f</span><span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">'</span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>func<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)"> is not a valid function name for transform(name)</span><span style="color:rgb(175,0,0)">"</span>

File <span class="ansi-green-fg">~/f_drive/Technology/Python Project/Capstone/Singapore-Resale-Flat-Prices-Predicting/singapore/lib/python3.10/site-packages/pandas/core/groupby/generic.py:557</span>, in <span class="ansi-cyan-fg">SeriesGroupBy._transform_general</span><span class="ansi-blue-fg">(self, func, engine, engine_kwargs, *args, **kwargs)</span>
<span class="ansi-green-fg ansi-bold">    552</span> <span style="font-weight:bold;color:rgb(0,135,0)">for</span> name, group <span style="font-weight:bold;color:rgb(175,0,255)">in</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_grouper<span style="color:rgb(98,98,98)">.</span>get_iterator(
<span class="ansi-green-fg ansi-bold">    553</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_obj_with_exclusions, axis<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>axis
<span class="ansi-green-fg ansi-bold">    554</span> ):
<span class="ansi-green-fg ansi-bold">    555</span>     <span style="font-style:italic;color:rgb(95,135,135)"># this setattr is needed for test_transform_lambda_with_datetimetz</span>
<span class="ansi-green-fg ansi-bold">    556</span>     <span style="color:rgb(0,135,0)">object</span><span style="color:rgb(98,98,98)">.</span><span style="color:rgb(0,0,255)">__setattr__</span>(group, <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">name</span><span style="color:rgb(175,0,0)">"</span>, name)
<span class="ansi-green-fg">--&gt; 557</span>     res <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">func</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">group</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">args</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg ansi-bold">    559</span>     results<span style="color:rgb(98,98,98)">.</span>append(klass(res, index<span style="color:rgb(98,98,98)">=</span>group<span style="color:rgb(98,98,98)">.</span>index))
<span class="ansi-green-fg ansi-bold">    561</span> <span style="font-style:italic;color:rgb(95,135,135)"># check for empty "results" to avoid concat ValueError</span>

Cell <span class="ansi-green-fg">In[99], line 10</span>, in <span class="ansi-cyan-fg">handle_outliers.&lt;locals&gt;.replace_outliers</span><span class="ansi-blue-fg">(group)</span>
<span class="ansi-green-fg ansi-bold">      8</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">replace_outliers</span>(group):
<span class="ansi-green-fg ansi-bold">      9</span>     <span style="font-weight:bold;color:rgb(0,135,0)">nonlocal</span> outlier_count
<span class="ansi-green-fg">---&gt; 10</span>     Q1 <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">group</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">continuous_var</span><span class="ansi-yellow-bg">]</span><span style="color:rgb(98,98,98)">.</span>quantile(<span style="color:rgb(98,98,98)">0.25</span>)
<span class="ansi-green-fg ansi-bold">     11</span>     Q3 <span style="color:rgb(98,98,98)">=</span> group[continuous_var]<span style="color:rgb(98,98,98)">.</span>quantile(<span style="color:rgb(98,98,98)">0.75</span>)
<span class="ansi-green-fg ansi-bold">     12</span>     IQR <span style="color:rgb(98,98,98)">=</span> Q3 <span style="color:rgb(98,98,98)">-</span> Q1

File <span class="ansi-green-fg">~/f_drive/Technology/Python Project/Capstone/Singapore-Resale-Flat-Prices-Predicting/singapore/lib/python3.10/site-packages/pandas/core/series.py:1121</span>, in <span class="ansi-cyan-fg">Series.__getitem__</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-fg ansi-bold">   1118</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_values[key]
<span class="ansi-green-fg ansi-bold">   1120</span> <span style="font-weight:bold;color:rgb(0,135,0)">elif</span> key_is_scalar:
<span class="ansi-green-fg">-&gt; 1121</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_get_value</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg ansi-bold">   1123</span> <span style="font-style:italic;color:rgb(95,135,135)"># Convert generator to list before going through hashable part</span>
<span class="ansi-green-fg ansi-bold">   1124</span> <span style="font-style:italic;color:rgb(95,135,135)"># (We will iterate through the generator there to check for slices)</span>
<span class="ansi-green-fg ansi-bold">   1125</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> is_iterator(key):

File <span class="ansi-green-fg">~/f_drive/Technology/Python Project/Capstone/Singapore-Resale-Flat-Prices-Predicting/singapore/lib/python3.10/site-packages/pandas/core/series.py:1237</span>, in <span class="ansi-cyan-fg">Series._get_value</span><span class="ansi-blue-fg">(self, label, takeable)</span>
<span class="ansi-green-fg ansi-bold">   1234</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_values[label]
<span class="ansi-green-fg ansi-bold">   1236</span> <span style="font-style:italic;color:rgb(95,135,135)"># Similar to Index.get_value, but we do not fall back to positional</span>
<span class="ansi-green-fg">-&gt; 1237</span> loc <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">index</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">get_loc</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">label</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg ansi-bold">   1239</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> is_integer(loc):
<span class="ansi-green-fg ansi-bold">   1240</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_values[loc]

File <span class="ansi-green-fg">~/f_drive/Technology/Python Project/Capstone/Singapore-Resale-Flat-Prices-Predicting/singapore/lib/python3.10/site-packages/pandas/core/indexes/base.py:3812</span>, in <span class="ansi-cyan-fg">Index.get_loc</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-fg ansi-bold">   3807</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">isinstance</span>(casted_key, <span style="color:rgb(0,135,0)">slice</span>) <span style="font-weight:bold;color:rgb(175,0,255)">or</span> (
<span class="ansi-green-fg ansi-bold">   3808</span>         <span style="color:rgb(0,135,0)">isinstance</span>(casted_key, abc<span style="color:rgb(98,98,98)">.</span>Iterable)
<span class="ansi-green-fg ansi-bold">   3809</span>         <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="color:rgb(0,135,0)">any</span>(<span style="color:rgb(0,135,0)">isinstance</span>(x, <span style="color:rgb(0,135,0)">slice</span>) <span style="font-weight:bold;color:rgb(0,135,0)">for</span> x <span style="font-weight:bold;color:rgb(175,0,255)">in</span> casted_key)
<span class="ansi-green-fg ansi-bold">   3810</span>     ):
<span class="ansi-green-fg ansi-bold">   3811</span>         <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> InvalidIndexError(key)
<span class="ansi-green-fg">-&gt; 3812</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">KeyError</span>(key) <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,0,255)">err</span>
<span class="ansi-green-fg ansi-bold">   3813</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">TypeError</span>:
<span class="ansi-green-fg ansi-bold">   3814</span>     <span style="font-style:italic;color:rgb(95,135,135)"># If we have a listlike key, _check_indexing_error will raise</span>
<span class="ansi-green-fg ansi-bold">   3815</span>     <span style="font-style:italic;color:rgb(95,135,135)">#  InvalidIndexError. Otherwise we fall through and re-raise</span>
<span class="ansi-green-fg ansi-bold">   3816</span>     <span style="font-style:italic;color:rgb(95,135,135)">#  the TypeError.</span>
<span class="ansi-green-fg ansi-bold">   3817</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_check_indexing_error(key)

<span class="ansi-red-fg">KeyError</span>: 'resale_price'</pre>
</div>
</div>
</div>
</section>
</section>
<section id="exploratory-data-analysis.-after-handling-skewness-and-outliers" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis.-after-handling-skewness-and-outliers">Exploratory Data Analysis. After Handling Skewness and Outliers</h2>
<div id="cell-133" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>df1_cleaned.describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-134" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>color_good <span class="op">=</span> <span class="st">'</span><span class="ch">\033</span><span class="st">[32m'</span>  <span class="co"># Dark Green for good skew</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>color_okay <span class="op">=</span> <span class="st">'</span><span class="ch">\033</span><span class="st">[92m'</span>  <span class="co"># Light Green for okay skew</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>color_bad <span class="op">=</span> <span class="st">'</span><span class="ch">\033</span><span class="st">[91m'</span>  <span class="co"># Maroon for bad skew</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>color_neutral <span class="op">=</span> <span class="st">'</span><span class="ch">\033</span><span class="st">[0m'</span>  <span class="co"># Reset color</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>skewed_col <span class="op">=</span> []</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>sns.set_theme(context<span class="op">=</span><span class="st">'notebook'</span>, style<span class="op">=</span><span class="st">'white'</span>, palette<span class="op">=</span><span class="st">'dark'</span>, font<span class="op">=</span><span class="st">'sans-serif'</span>, font_scale<span class="op">=</span><span class="dv">1</span>, color_codes<span class="op">=</span><span class="va">True</span>, rc<span class="op">=</span><span class="va">None</span>)  </span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> continuous:</span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>    univar_num(df1_cleaned,i) </span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a>    skew_val <span class="op">=</span> df1_cleaned[i].skew()</span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">-</span><span class="fl">0.5</span> <span class="op">&lt;=</span> skew_val <span class="op">&lt;=</span> <span class="fl">0.5</span>:</span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_good  <span class="co"># Dark Green for near-zero skew</span></span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">0</span> <span class="op">&lt;</span> skew_val <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="kw">or</span> <span class="op">-</span><span class="fl">0.5</span> <span class="op">&lt;</span> skew_val <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_okay  <span class="co"># Light Green for slightly positive or slightly negative skew</span></span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:  <span class="co"># skew_val &gt; 0.5 or skew_val &lt; -0.5</span></span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_bad  <span class="co"># Maroon for significant skew</span></span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a>        skewed_col.append(i)</span>
<span id="cb125-21"><a href="#cb125-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-22"><a href="#cb125-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="sc">{</span>color<span class="sc">}</span><span class="ss">Skew for </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>skew_val<span class="sc">:.2f}{</span>color_neutral<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-139" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>normalized_df_cleaned<span class="op">=</span>skewness_checker(df1_cleaned, continuous, method_functions)</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>normalized_df_cleaned</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-140" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>transformed_skewness <span class="op">=</span> {}</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>transformed_kurtosis <span class="op">=</span> {}</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> normalized_df_cleaned.columns:</span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>    univar_num(normalized_df_cleaned,i)</span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>    skews<span class="op">=</span>normalized_df_cleaned[i].skew()</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>    kurt<span class="op">=</span>normalized_df_cleaned[i].kurtosis()</span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>    transformed_skewness.update({i:skews})</span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>    transformed_kurtosis.update({i:kurt})</span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> color_neutral</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">-</span><span class="fl">0.5</span> <span class="op">&lt;=</span> skews <span class="op">&lt;=</span> <span class="fl">0.5</span>:</span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_good  <span class="co"># Dark Green for near-zero skew</span></span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">0</span> <span class="op">&lt;</span> skews <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="kw">or</span> <span class="op">-</span><span class="fl">0.5</span> <span class="op">&lt;</span> skews <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_okay  <span class="co"># Light Green for slightly positive or slightly negative skew</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:  <span class="co"># skew_val &gt; 0.5 or skew_val &lt; -0.5</span></span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_bad  <span class="co"># Maroon for significant skew</span></span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n\n</span><span class="sc">{</span>color<span class="sc">}</span><span class="ss">Skew for </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>skews<span class="sc">:.2f}{</span>color_neutral<span class="sc">}</span><span class="ss">"</span>)    </span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="sc">{</span>color<span class="sc">}</span><span class="ss">Kurtosis for </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span>kurt<span class="sc">:.2f}{</span>color_neutral<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span>)</span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( <span class="st">'Skewness:</span><span class="ch">\n</span><span class="st">'</span>,transformed_skewness,<span class="st">'</span><span class="ch">\n\n</span><span class="st">'</span>,<span class="st">'Kurtois:</span><span class="ch">\n</span><span class="st">'</span>,transformed_kurtosis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-145" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>df1.sample(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-146" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>df1.sample(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>

</b></main><b>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</b></div><b> <!-- /content -->




</b></body></html>